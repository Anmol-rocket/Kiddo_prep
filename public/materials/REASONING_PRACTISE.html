<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIIMS CRE Reasoning Practice</title>
    <style>
        :root {
            --primary: #005f73;
            --secondary: #0a9396;
            --light: #e9d8a6;
            --white: #ffffff;
            --gray: #f4f4f4;
            --correct-bg: #d1fae5;
            --correct-border: #059669;
            --wrong-bg: #fee2e2;
            --wrong-border: #dc2626;
            --text: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--gray);
            margin: 0;
            padding: 0;
            color: var(--text);
            line-height: 1.6;
        }

        /* Header */
        header {
            background-color: var(--primary);
            color: var(--white);
            padding: 1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        h1 { margin: 0; font-size: 1.2rem; }
        .subtitle { font-size: 0.8rem; opacity: 0.9; }

        /* Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
            padding-bottom: 80px;
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        button {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
            display: block;
        }

        button:hover { background-color: var(--primary); }
        button.secondary-btn { background-color: #666; }

        /* Quiz Interface */
        .question-number {
            font-size: 0.9rem;
            color: var(--secondary);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .option-content { display: flex; align-items: center; }
        .option-label:hover { background-color: #f9f9f9; border-color: var(--secondary); }
        
        input[type="radio"] {
            margin-right: 10px;
            accent-color: var(--secondary);
        }

        /* --- REVIEW MODE STYLES --- */
        .review-mode .option-label.correct {
            border-color: var(--correct-border);
            background-color: var(--correct-bg);
            color: #065f46;
        }
        
        .review-mode .option-label.correct::after {
            content: "âœ“ Correct";
            font-weight: bold;
            font-size: 0.85rem;
            color: var(--correct-border);
        }

        .review-mode .option-label.incorrect {
            border-color: var(--wrong-border);
            background-color: var(--wrong-bg);
            color: #991b1b;
        }

        .review-mode .option-label.incorrect::after {
            content: "âœ— Your Answer";
            font-weight: bold;
            font-size: 0.85rem;
            color: var(--wrong-border);
        }

        .review-mode .option-label:not(.correct):not(.incorrect) {
            opacity: 0.6;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: #f0f9ff;
            border-left: 5px solid var(--secondary);
            border-radius: 4px;
            font-size: 0.95rem;
            display: none;
        }

        .review-mode .explanation { display: block; }

        /* History Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        th, td { padding: 10px; border-bottom: 1px solid #ddd; text-align: left; }
        th { background-color: var(--gray); }

        /* Footer Nav */
        .progress-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 10px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
        }

        .submit-btn { background: var(--correct-border); margin: 0; width: auto; }

        /* Utility */
        .hidden { display: none !important; }
        .score-display { font-size: 2.5rem; font-weight: bold; color: var(--primary); }
        .score-card { text-align: center; padding: 2rem; }

    </style>
</head>
<body>

<header>
    <h1>AIIMS CRE Reasoning</h1>
    <div class="subtitle">Clocks, Calendars & Logic (30 Q)</div>
</header>

<div class="container">

    <div id="start-screen" class="card" style="text-align: center;">
        <h2>General Intelligence Test</h2>
        <p>30 Questions | Instant Review | Persistent History</p>
        <p style="color: #666; font-size: 0.9rem;">Topics: Clocks, Calendars, Angles, Series, Coding-Decoding</p>
        
        <button onclick="startQuiz()">Start Test</button>
        
        <div style="margin-top: 2rem; border-top: 1px solid #eee; padding-top: 1rem;">
            <h3>Past Performance</h3>
            <div id="history-list">
                <p>No attempts yet.</p>
            </div>
            <button class="secondary-btn" onclick="clearHistory()" style="font-size: 0.8rem; padding: 5px 10px; width: auto;">Clear History</button>
        </div>
    </div>

    <div id="quiz-container" class="hidden">
        <div id="questions-list"></div>
    </div>

    <div id="result-screen" class="hidden card score-card">
        <h2>Test Submitted!</h2>
        <div class="score-display">
            <span id="score-text">0</span> / 30
        </div>
        <p id="feedback-text"></p>
        
        <button onclick="enableReviewMode()">Review Answers (with Solutions)</button>
        <button class="secondary-btn" onclick="location.reload()">Back to Home</button>
    </div>

</div>

<div id="quiz-nav" class="progress-container hidden">
    <div id="progress-text" style="font-weight: bold; color: var(--primary);">0/30 Answered</div>
    <button id="submit-btn" class="submit-btn" onclick="submitQuiz()">Submit Test</button>
</div>

<script>
    // --- QUESTION DATA (Full Text Restored) ---
const questions = [
    // CLOCK & ANGLES
    {
        q: "What is the angle between the hour hand and the minute hand of a clock at 3:40?",
        options: ["120Â°", "130Â°", "140Â°", "150Â°"],
        correct: 1,
        expl: "Angle formula = |30H âˆ’ 5.5M|. Here H=3, M=40. |30Ã—3 âˆ’ 5.5Ã—40| = |90 âˆ’ 220| = 130Â°."
    },
    {
        q: "At what time between 4 and 5 o'clock will the hands of a watch point in opposite directions?",
        options: ["4:54 6/11", "4:45", "4:50", "4:55"],
        correct: 0,
        expl: "For opposite direction, angle = 180Â°. Minutes = (2/11)(30H + 180). For H=4: (2/11)(120+180)=600/11=54 6/11 minutes."
    },
    {
        q: "A clock is set right at 5 AM. The clock loses 16 minutes in 24 hours. What will be the true time when the clock indicates 10 PM on the 4th day?",
        options: ["11 PM", "10 PM", "9 PM", "12 PM"],
        correct: 0,
        expl: "From 5 AM day 1 to 10 PM day 4, shown time = 89 hours. Clock shows 23h44m in 24 real hours â‡’ rate = 89/90. Real time = 89 Ã— (90/89) = 90 hours. 5 AM + 90 hours = 11 PM."
    },
    {
        q: "How many times do the hands of a clock coincide in a day?",
        options: ["20", "21", "22", "24"],
        correct: 2,
        expl: "Hands coincide 11 times in 12 hours. Therefore, in 24 hours they coincide 22 times."
    },
    {
        q: "What is the reflex angle between the hands of a clock at 10:25?",
        options: ["180Â°", "192.5Â°", "197.5Â°", "162.5Â°"],
        correct: 2,
        expl: "Smaller angle = |30Ã—10 âˆ’ 5.5Ã—25| = |300 âˆ’ 137.5| = 162.5Â°. Reflex angle = 360 âˆ’ 162.5 = 197.5Â°."
    },

    // CALENDAR
    {
        q: "If today is Monday, what will be the day after 61 days?",
        options: ["Tuesday", "Wednesday", "Saturday", "Thursday"],
        correct: 2,
        expl: "61 Ã· 7 = 8 weeks + 5 days. Monday + 5 days = Saturday."
    },
    {
        q: "The calendar for the year 2007 will be the same for the year:",
        options: ["2014", "2016", "2017", "2018"],
        correct: 3,
        expl: "2007 is a non-leap year. Counting odd days forward, the total becomes a multiple of 7 again in 2018, so calendars match."
    },
    {
        q: "Which of the following is not a leap year?",
        options: ["700", "800", "1200", "2000"],
        correct: 0,
        expl: "A century year must be divisible by 400 to be a leap year. 700 is not divisible by 400."
    },
    {
        q: "If 1st January 2006 was Sunday, what was the day of the week on 1st January 2010?",
        options: ["Sunday", "Saturday", "Friday", "Wednesday"],
        correct: 2,
        expl: "Odd days: 2006=1, 2007=1, 2008=2 (leap), 2009=1 â†’ total 5. Sunday + 5 = Friday."
    },
    {
        q: "How many leap years does 100 years have?",
        options: ["25", "24", "4", "50"],
        correct: 1,
        expl: "In 100 years there are 25 multiples of 4, but the century year is not leap unless divisible by 400. So leap years = 24."
    },

    // SERIES & ALPHABET
    {
        q: "Find the missing number: 2, 6, 12, 20, 30, 42, ?",
        options: ["56", "54", "50", "62"],
        correct: 0,
        expl: "Pattern: n(n+1). Sequence: 1Ã—2, 2Ã—3, 3Ã—4, ... Next = 7Ã—8 = 56."
    },
    {
        q: "Find the next term: 3F, 6G, 11I, 18L, ?",
        options: ["21O", "25N", "27P", "27Q"],
        correct: 2,
        expl: "Numbers increase by +3, +5, +7, +9 â†’ 27. Letters move +1, +2, +3, +4 â†’ P."
    },
    {
        q: "Complete the series: 1, 9, 25, 49, ?, 121",
        options: ["64", "81", "91", "100"],
        correct: 1,
        expl: "Squares of odd numbers: 1Â², 3Â², 5Â², 7Â², 9Â², 11Â²."
    },
    {
        q: "Look at this series: 7, 10, 8, 11, 9, 12, ... What number should come next?",
        options: ["7", "10", "12", "13"],
        correct: 1,
        expl: "Two alternating series: 7,8,9,10 and 10,11,12,â€¦ Next term = 10."
    },

    // CODING DECODING
    {
        q: "In a certain code, TEACHER is written as VGCEJGT. How is CHILDREN written in that code?",
        options: ["EJKNEGTP", "EGKNFITP", "EJKNFGTO", "EJKNFTGP"],
        correct: 3,
        expl: "Each letter is shifted forward by +2 in the alphabet."
    },
    {
        q: "If Z = 52 and ACT = 48, then BAT will be equal to:",
        options: ["39", "41", "44", "46"],
        correct: 3,
        expl: "Letter values summed and multiplied by 2. BAT = (2+1+20)Ã—2 = 46."
    },

    // DIRECTIONS
    {
        q: "A man walks 5 km toward South, then turns right and walks 3 km, then turns left and walks 5 km. In which direction is he from the starting point?",
        options: ["West", "South", "North-East", "South-West"],
        correct: 3,
        expl: "Final position is south and west of start â†’ South-West."
    },
    {
        q: "One morning Udai and Vishal were talking face to face. Vishalâ€™s shadow was to the left of Udai. Which direction was Udai facing?",
        options: ["East", "West", "North", "South"],
        correct: 2,
        expl: "Morning sun is in East, shadow falls West. If shadow is to Udaiâ€™s left, his left = West â‡’ he faces North."
    },

    // BLOOD RELATIONS
    {
        q: "Pointing to a photograph, Suresh said, 'He is the son of the only son of my mother.' How is Suresh related to the boy?",
        options: ["Brother", "Uncle", "Cousin", "Father"],
        correct: 3,
        expl: "â€˜Only son of my motherâ€™ refers to Suresh himself. The boy is his son."
    },
    {
        q: "A is B's sister. C is B's mother. D is C's father. How is A related to D?",
        options: ["Grandmother", "Grandfather", "Daughter", "Granddaughter"],
        correct: 3,
        expl: "A â†’ daughter of C â†’ granddaughter of D."
    },

    // LOGICAL DEDUCTION
    {
        q: "Statements: All mangoes are golden. No golden things are cheap.\nConclusion:\n1) All mangoes are cheap.\n2) Golden mangoes are not cheap.",
        options: ["Only conclusion 1 follows", "Only conclusion 2 follows", "Either 1 or 2 follows", "Both follow"],
        correct: 1,
        expl: "Mangoes â†’ Golden â†’ Not Cheap. Conclusion 2 follows; conclusion 1 is false."
    },
    {
        q: "Arrange the words in a meaningful sequence: 1. Infection 2. Consultation 3. Doctor 4. Treatment 5. Recovery",
        options: ["1,3,4,5,2", "1,3,2,4,5", "1,2,3,4,5", "2,3,5,1,4"],
        correct: 1,
        expl: "Infection â†’ Doctor â†’ Consultation â†’ Treatment â†’ Recovery."
    },

    // MISC
    {
        q: "The average of first 50 natural numbers is:",
        options: ["25.30", "25.5", "25.00", "12.25"],
        correct: 1,
        expl: "Average of first n natural numbers = (n+1)/2 = 25.5."
    },
    {
        q: "A train running at 60 km/hr crosses a pole in 9 seconds. What is the length of the train?",
        options: ["120 metres", "180 metres", "324 metres", "150 metres"],
        correct: 3,
        expl: "Speed = 60Ã—5/18 = 50/3 m/s. Length = speed Ã— time = (50/3)Ã—9 = 150 m."
    },
    {
        q: "Today is Tuesday. My uncle will come after 45 days. On which day will he come?",
        options: ["Monday", "Saturday", "Friday", "Sunday"],
        correct: 2,
        expl: "45 Ã· 7 = 6 weeks + 3 days. Tuesday + 3 = Friday."
    },
    {
        q: "Find the odd one out: 3, 5, 11, 14, 17, 21",
        options: ["21", "17", "14", "3"],
        correct: 2,
        expl: "14 is the only even number in the list; others are odd."
    },
    {
        q: "A father is three times more than his son. After 8 years, he is 2.5 times the son. After further 8 years, how many times will he be?",
        options: ["2 times", "2.5 times", "2.75 times", "3 times"],
        correct: 0,
        expl: "Interpret father = son + 3Ã—son = 4x. Solve: (4x+8)=2.5(x+8) â†’ x=8. After 16 years, father=48, son=24 â‡’ 2 times."
    },
    {
        q: "Insert the missing number: 7, 26, 63, 124, 215, 342, ?",
        options: ["391", "421", "481", "511"],
        correct: 3,
        expl: "Pattern: nÂ³ âˆ’ 1. Next = 8Â³ âˆ’ 1 = 511."
    },
    {
        q: "Two positions of a dice are shown: (1,2,3) and (1,3,5). When 4 is at the bottom, what will be at the top?",
        options: ["2", "5", "6", "1"],
        correct: 2,
        expl: "Common faces 1 and 3 â‡’ adjacent. Remaining faces 2 and 5 are opposite. Remaining pair is 4 and 6. Hence top = 6."
    },
    {
        q: "Count the number of triangles in a square crossed by two diagonals.",
        options: ["4", "6", "8", "10"],
        correct: 2,
        expl: "4 small triangles + 4 larger triangles = 8."
    }
];


    let userAnswers = new Array(questions.length).fill(null);
    const historyKey = 'aiims_cre_history';

    window.onload = function() {
        renderHistory();
    }

    function startQuiz() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-container').classList.remove('hidden');
        document.getElementById('quiz-nav').classList.remove('hidden');
        document.getElementById('quiz-nav').style.display = 'flex';
        renderQuestions();
    }

    function renderQuestions() {
        const container = document.getElementById('questions-list');
        container.innerHTML = '';

        questions.forEach((item, index) => {
            const qDiv = document.createElement('div');
            qDiv.className = 'card question-card';
            qDiv.id = `q-card-${index}`;
            
            let optionsHtml = '';
            item.options.forEach((opt, optIndex) => {
                optionsHtml += `
                    <label class="option-label" id="lbl-${index}-${optIndex}">
                        <span class="option-content">
                            <input type="radio" name="q${index}" value="${optIndex}" onchange="selectOption(${index}, ${optIndex})">
                            ${opt}
                        </span>
                    </label>
                `;
            });

            qDiv.innerHTML = `
                <div class="question-number">Question ${index + 1}</div>
                <div class="question-text">${item.q}</div>
                <div class="options-grid">${optionsHtml}</div>
                <div class="explanation" id="expl-${index}">
                    <strong>ðŸ’¡ Explanation:</strong> ${item.expl}
                </div>
            `;
            container.appendChild(qDiv);
        });
    }

    function selectOption(qIndex, optIndex) {
        userAnswers[qIndex] = optIndex;
        
        // Visual select (reset others)
        const labels = document.querySelectorAll(`#q-card-${qIndex} .option-label`);
        labels.forEach(l => {
            l.style.borderColor = '#ddd';
            l.style.backgroundColor = 'white';
        });
        
        const selectedLabel = document.getElementById(`lbl-${qIndex}-${optIndex}`);
        selectedLabel.style.borderColor = 'var(--secondary)';
        selectedLabel.style.backgroundColor = '#f0fcfc';

        // Update footer count
        const count = userAnswers.filter(a => a !== null).length;
        document.getElementById('progress-text').innerText = `${count}/${questions.length} Answered`;
    }

    function submitQuiz() {
        if(userAnswers.filter(a => a === null).length > 0) {
            if(!confirm("Submit with unanswered questions?")) return;
        }

        let score = 0;
        questions.forEach((q, i) => {
            if (userAnswers[i] === q.correct) score++;
        });

        saveHistory(score);

        document.getElementById('quiz-container').classList.add('hidden');
        document.getElementById('quiz-nav').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('score-text').innerText = score;

        let msg = score > 25 ? "Outstanding!" : score > 15 ? "Good effort!" : "Keep practicing!";
        document.getElementById('feedback-text').innerText = msg;
    }

    function enableReviewMode() {
        document.getElementById('result-screen').classList.add('hidden');
        document.getElementById('quiz-container').classList.remove('hidden');
        document.body.classList.add('review-mode'); // This triggers the CSS magic

        questions.forEach((q, i) => {
            const card = document.getElementById(`q-card-${i}`);
            const userPick = userAnswers[i];
            
            // Disable interactions
            card.querySelectorAll('input').forEach(i => i.disabled = true);

            // 1. Highlight Correct Answer (ALWAYS GREEN)
            const correctLabel = document.getElementById(`lbl-${i}-${q.correct}`);
            if(correctLabel) {
                correctLabel.classList.add('correct');
                // Force check radio for correct visual if not selected
                correctLabel.querySelector('input').checked = true;
            }

            // 2. Highlight User Mistake (RED)
            if (userPick !== null && userPick !== q.correct) {
                const wrongLabel = document.getElementById(`lbl-${i}-${userPick}`);
                if(wrongLabel) wrongLabel.classList.add('incorrect');
            }
        });

        // Add 'Finish Review' button at bottom
        const footer = document.createElement('div');
        footer.innerHTML = `<button onclick="location.reload()" style="margin: 40px auto; background:#333;">Exit Review Mode</button>`;
        document.getElementById('questions-list').appendChild(footer);
    }

    function saveHistory(score) {
        let h = JSON.parse(localStorage.getItem(historyKey)) || [];
        h.unshift({ date: new Date().toLocaleDateString(), score: score });
        if(h.length > 5) h.pop();
        localStorage.setItem(historyKey, JSON.stringify(h));
    }

    function renderHistory() {
        const h = JSON.parse(localStorage.getItem(historyKey));
        const list = document.getElementById('history-list');
        if (!h || h.length === 0) return;
        
        let html = '<table><tr><th>Date</th><th>Score</th></tr>';
        h.forEach(x => html += `<tr><td>${x.date}</td><td>${x.score} / 30</td></tr>`);
        html += '</table>';
        list.innerHTML = html;
    }

    function clearHistory() {
        localStorage.removeItem(historyKey);
        renderHistory();
        document.getElementById('history-list').innerHTML = '<p>No attempts yet.</p>';
    }
</script>

</body>
</html>
