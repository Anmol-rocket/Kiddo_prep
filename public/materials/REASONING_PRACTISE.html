<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIIMS CRE Reasoning Practice</title>
    <style>
        :root {
            --primary: #005f73; /* Medical Teal */
            --secondary: #0a9396;
            --light: #e9d8a6;
            --white: #ffffff;
            --gray: #f4f4f4;
            --correct: #2a9d8f;
            --wrong: #e76f51;
            --text: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--gray);
            margin: 0;
            padding: 0;
            color: var(--text);
            line-height: 1.6;
        }

        /* Header */
        header {
            background-color: var(--primary);
            color: var(--white);
            padding: 1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        h1 { margin: 0; font-size: 1.2rem; }
        .subtitle { font-size: 0.8rem; opacity: 0.9; }

        /* Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
            padding-bottom: 80px; /* Space for footer */
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* Start Screen */
        #start-screen, #result-screen { text-align: center; }
        
        button {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
            display: block;
        }

        button:hover { background-color: var(--primary); }
        button.secondary-btn { background-color: #666; }

        /* Quiz Interface */
        .question-number {
            font-size: 0.9rem;
            color: var(--secondary);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover { background-color: #f9f9f9; border-color: var(--secondary); }
        
        /* Hiding actual radio button */
        input[type="radio"] {
            margin-right: 10px;
            accent-color: var(--secondary);
        }

        /* Review Styles */
        .review-mode .option-label.correct {
            border-color: var(--correct);
            background-color: rgba(42, 157, 143, 0.1);
        }

        .review-mode .option-label.incorrect {
            border-color: var(--wrong);
            background-color: rgba(231, 111, 81, 0.1);
        }

        .explanation {
            margin-top: 15px;
            padding: 10px;
            background-color: #eef9f8;
            border-left: 4px solid var(--secondary);
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        .review-mode .explanation { display: block; }

        /* History Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        th, td { padding: 10px; border-bottom: 1px solid #ddd; text-align: left; }
        th { background-color: var(--gray); }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 10px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-btn {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
            padding: 8px 16px;
            width: auto;
            margin: 0;
        }

        .submit-btn {
            background: var(--correct);
        }

        /* Utility */
        .hidden { display: none !important; }
        .score-display { font-size: 2rem; font-weight: bold; color: var(--primary); }

    </style>
</head>
<body>

<header>
    <h1>AIIMS CRE Reasoning</h1>
    <div class="subtitle">Clocks, Calendars & Logic</div>
</header>

<div class="container">

    <div id="start-screen" class="card">
        <h2>General Intelligence & Reasoning</h2>
        <p>30 Questions | Clocks, Angles, Calendar, Series</p>
        <p>Test your logic skills for the AIIMS Common Recruitment Exam.</p>
        
        <button onclick="startQuiz()">Start Test</button>
        
        <div style="margin-top: 2rem;">
            <h3>Past Performance</h3>
            <div id="history-list">
                <p>No attempts yet.</p>
            </div>
            <button class="secondary-btn" onclick="clearHistory()" style="font-size: 0.8rem; padding: 5px 10px; width: auto;">Clear History</button>
        </div>
    </div>

    <div id="quiz-container" class="hidden">
        <div id="questions-list"></div>
    </div>

    <div id="result-screen" class="hidden card">
        <h2>Test Submitted!</h2>
        <div class="score-display">
            <span id="score-text">0</span> / 30
        </div>
        <p id="feedback-text"></p>
        
        <button onclick="enableReviewMode()">Review Answers & Explanations</button>
        <button class="secondary-btn" onclick="location.reload()">Back to Home</button>
    </div>

</div>

<div id="quiz-nav" class="progress-container hidden">
    <div id="progress-text">0/30 Answered</div>
    <button id="submit-btn" class="submit-btn" onclick="submitQuiz()">Submit Test</button>
</div>

<script>
    // --- QUESTION DATA ---
    // 30 Standard Reasoning Questions (Clock, Calendar, Series, Logic)
    const questions = [
        // CLOCK & ANGLES
        {
            q: "What is the angle between the hour hand and the minute hand of a clock at 3:40?",
            options: ["120°", "130°", "140°", "150°"],
            correct: 1, // 130
            expl: "Formula: |30H - 5.5M|. H=3, M=40. |30(3) - 5.5(40)| = |90 - 220| = |-130| = 130°."
        },
        {
            q: "At what time between 4 and 5 o'clock will the hands of a watch point in opposite directions?",
            options: ["4:54 6/11", "4:45", "4:50", "4:55"],
            correct: 0,
            expl: "Opposite means 180°. M = (2/11) * (30H ± 180). For 4-5, use +180. M = (2/11)*(120+180) = (2/11)*300 = 600/11 = 54 6/11."
        },
        {
            q: "A clock is set right at 5 AM. The clock loses 16 minutes in 24 hours. What will be the true time when the clock indicates 10 PM on the 4th day?",
            options: ["11 PM", "10 PM", "9 PM", "12 PM"],
            correct: 0,
            expl: "Time from 5 AM day 1 to 10 PM day 4 = 89 hours. Clock loses 16 min/24 hrs. Real 24 hrs = Clock 23hr 44min. Calculation leads to exactly 11 PM."
        },
        {
            q: "How many times do the hands of a clock coincide in a day?",
            options: ["20", "21", "22", "24"],
            correct: 2,
            expl: "Hands coincide once every hour except between 11-1. They coincide 11 times in 12 hours, so 22 times in 24 hours."
        },
        {
            q: "What is the reflex angle between the hands of a clock at 10:25?",
            options: ["180°", "192.5°", "197.5°", "162.5°"],
            correct: 2,
            expl: "Angle = |30(10) - 5.5(25)| = |300 - 137.5| = 162.5°. Reflex angle = 360 - 162.5 = 197.5°."
        },
        
        // CALENDAR
        {
            q: "If today is Monday, what will be the day after 61 days?",
            options: ["Tuesday", "Wednesday", "Saturday", "Thursday"],
            correct: 2,
            expl: "61 ÷ 7 = 8 weeks and 5 odd days. Monday + 5 days = Saturday."
        },
        {
            q: "The calendar for the year 2007 will be the same for the year:",
            options: ["2014", "2016", "2017", "2018"],
            correct: 3,
            expl: "2007 is a normal year (1 odd day). Count odd days until sum is div by 7. 2007(1)+08(2)+09(1)+10(1)+11(1)+12(2)+13(1)+14(1)+15(1)+16(2)+17(1) = 14. Next year 2018 repeats."
        },
        {
            q: "Which of the following is not a leap year?",
            options: ["700", "800", "1200", "2000"],
            correct: 0,
            expl: "Century years must be divisible by 400 to be leap years. 700 is not divisible by 400."
        },
        {
            q: "If 1st January 2006 was Sunday, what was the day of the week on 1st January 2010?",
            options: ["Sunday", "Saturday", "Friday", "Wednesday"],
            correct: 2,
            expl: "2006 (1 odd), 2007 (1 odd), 2008 (Leap, 2 odd), 2009 (1 odd). Total = 1+1+2+1 = 5. Sunday + 5 = Friday."
        },
        {
            q: "How many leap years does 100 years have?",
            options: ["25", "24", "4", "50"],
            correct: 1,
            expl: "100th year is not a leap year usually (unless div by 400). So in first 100 years: 24 leap, 76 normal."
        },

        // SERIES & ALPHABET
        {
            q: "Find the missing number: 2, 6, 12, 20, 30, 42, ?",
            options: ["56", "54", "50", "62"],
            correct: 0,
            expl: "Pattern: 1*2, 2*3, 3*4, 4*5, 5*6, 6*7. Next is 7*8 = 56."
        },
        {
            q: "Find the next term: 3F, 6G, 11I, 18L, ?",
            options: ["21O", "25N", "27P", "27Q"],
            correct: 2,
            expl: "Numbers: +3, +5, +7, next is +9 (18+9=27). Letters: F(+1)G(+2)I(+3)L(+4)P. Answer 27P."
        },
        {
            q: "Complete the series: 1, 9, 25, 49, ?, 121",
            options: ["64", "81", "91", "100"],
            correct: 1,
            expl: "Squares of odd numbers: 1², 3², 5², 7², 9²(81), 11²."
        },
        {
            q: "Look at this series: 7, 10, 8, 11, 9, 12, ... What number should come next?",
            options: ["7", "10", "12", "13"],
            correct: 1,
            expl: "Two alternating series: (7, 8, 9, 10) and (10, 11, 12...). Next is 10."
        },
        
        // CODING DECODING
        {
            q: "In a certain code, TEACHER is written as VGCEJGT. How is CHILDREN written in that code?",
            options: ["EJKNEGTP", "EGKNFITP", "EJKNFGTO", "EJKNFTGP"],
            correct: 3,
            expl: "Each letter is shifted forward by +2. C+2=E, H+2=J, I+2=K, L+2=N, D+2=F, R+2=T, E+2=G, N+2=P."
        },
        {
            q: "If Z = 52 and ACT = 48, then BAT will be equal to:",
            options: ["39", "41", "44", "46"],
            correct: 3,
            expl: "A=1, B=2... Z=26. Multiply by 2. Z=26*2=52. ACT=(1+3+20)*2 = 48. BAT=(2+1+20)*2 = 23*2 = 46."
        },

        // DIRECTIONS
        {
            q: "A man walks 5km toward South and then turns to the right. After walking 3km he turns to the left and walks 5km. Now in which direction is he from the starting place?",
            options: ["West", "South", "North-East", "South-West"],
            correct: 3,
            expl: "South (5km) -> Right turn (West 3km) -> Left turn (South 5km). He is South and West of origin."
        },
        {
            q: "One morning Udai and Vishal were talking to each other face to face at a crossing. If Vishal's shadow was exactly to the left of Udai, which direction was Udai facing?",
            options: ["East", "West", "North", "South"],
            correct: 2,
            expl: "Morning sun is in East. Shadows fall West. If shadow is to Udai's left (West), Udai must be facing North."
        },

        // BLOOD RELATIONS
        {
            q: "Pointing to a photograph of a boy Suresh said, 'He is the son of the only son of my mother.' How is Suresh related to that boy?",
            options: ["Brother", "Uncle", "Cousin", "Father"],
            correct: 3,
            expl: "'Only son of my mother' is Suresh himself. The boy is the son of Suresh. So Suresh is the Father."
        },
        {
            q: "A is B's sister. C is B's mother. D is C's father. E is D's mother. Then, how is A related to D?",
            options: ["Grandmother", "Grandfather", "Daughter", "Granddaughter"],
            correct: 3,
            expl: "A is sister of B, so A is daughter of C. C is daughter of D. So A is granddaughter of D."
        },

        // LOGICAL DEDUCTION
        {
            q: "Statements: All mangoes are golden in colour. No golden-coloured things are cheap.\nConclusion:\n1) All mangoes are cheap.\n2) Golden-coloured mangoes are not cheap.",
            options: ["Only conclusion 1 follows", "Only conclusion 2 follows", "Either 1 or 2 follows", "Both follow"],
            correct: 1,
            expl: "Mangoes -> Golden -> Not Cheap. Therefore, Mangoes are not cheap. Conclusion 2 is correct."
        },
        {
            q: "Arrange the words in a meaningful sequence: 1. Infection 2. Consultation 3. Doctor 4. Treatment 5. Recovery",
            options: ["1, 3, 4, 5, 2", "1, 3, 2, 4, 5", "1, 2, 3, 4, 5", "2, 3, 5, 1, 4"],
            correct: 1,
            expl: "Infection -> Doctor -> Consultation -> Treatment -> Recovery."
        },

        // MISC MATH/LOGIC
        {
            q: "The average of first 50 natural numbers is:",
            options: ["25.30", "25.5", "25.00", "12.25"],
            correct: 1,
            expl: "Sum of n natural numbers = n(n+1)/2. Average = (n+1)/2. (50+1)/2 = 25.5."
        },
        {
            q: "A train running at the speed of 60 km/hr crosses a pole in 9 seconds. What is the length of the train?",
            options: ["120 metres", "180 metres", "324 metres", "150 metres"],
            correct: 3,
            expl: "Speed = 60 * (5/18) = 50/3 m/s. Distance = Speed * Time. (50/3) * 9 = 150m."
        },
        {
            q: "Today is Tuesday. My uncle will come after 45 days. In which day my uncle will be coming?",
            options: ["Monday", "Saturday", "Friday", "Sunday"],
            correct: 2,
            expl: "45 / 7 = 6 weeks + 3 days. Tuesday + 3 = Friday."
        },
        {
            q: "Find the odd one out: 3, 5, 11, 14, 17, 21",
            options: ["21", "17", "14", "3"],
            correct: 2,
            expl: "3, 5, 11, 17 are Prime Numbers. 14 and 21 are not. However, usually in such series 14 is the only even number."
        },
        {
            q: "A father is aged three times more than his son Ronit. After 8 years, he would be two and a half times of Ronit's age. After further 8 years, how many times would he be of Ronit's age?",
            options: ["2 times", "2.5 times", "2.75 times", "3 times"],
            correct: 0,
            expl: "Let Ronit = x, Father = x + 3x = 4x. (4x+8) = 2.5(x+8). Solve x=8. Father=32. After 16 years: R=24, F=48. F = 2 * R."
        },
        {
            q: "Insert the missing number: 7, 26, 63, 124, 215, 342, ?",
            options: ["391", "421", "481", "511"],
            correct: 3,
            expl: "n^3 - 1. 2^3-1=7, 3^3-1=26... 8^3-1 = 512-1 = 511."
        },
        {
            q: "Two positions of a dice are shown. When 4 is at the bottom, what will be at the top? (Assume standard dice logic if not specified, but usually based on adjacent faces). If faces are: (1,2,3) and (1,3,5).",
            options: ["2", "5", "6", "1"],
            correct: 1,
            expl: "Faces 1 and 3 are common. The remaining faces are opposite. 2 is opposite 5. If 4 is involved in a standard dice, 4 is opposite 3."
            // *Correction for logic context*: For the specific common reasoning pattern: If (1,2,3) and (1,3,5) are visible, 1 & 3 are adjacent to 2 and 5. Thus 2 is opposite 5.
        },
        {
            q: "Count the number of triangles in a square crossed by two diagonals.",
            options: ["4", "6", "8", "10"],
            correct: 2,
            expl: "Small triangles: 4. Combined triangles (2 small ones): 4. Total = 8."
        }
    ];

    // --- STATE MANAGEMENT ---
    let userAnswers = new Array(questions.length).fill(null);
    const historyKey = 'aiims_cre_history';

    // --- INITIALIZATION ---
    window.onload = function() {
        renderHistory();
    }

    function startQuiz() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-container').classList.remove('hidden');
        document.getElementById('quiz-nav').classList.remove('hidden');
        document.getElementById('quiz-nav').style.display = 'flex';
        renderQuestions();
    }

    function renderQuestions() {
        const container = document.getElementById('questions-list');
        container.innerHTML = '';

        questions.forEach((item, index) => {
            const qDiv = document.createElement('div');
            qDiv.className = 'card question-card';
            qDiv.id = `q-card-${index}`;
            
            let optionsHtml = '';
            item.options.forEach((opt, optIndex) => {
                optionsHtml += `
                    <label class="option-label" id="lbl-${index}-${optIndex}">
                        <input type="radio" name="q${index}" value="${optIndex}" onchange="selectOption(${index}, ${optIndex})">
                        ${opt}
                    </label>
                `;
            });

            qDiv.innerHTML = `
                <div class="question-number">Question ${index + 1} of 30</div>
                <div class="question-text">${item.q}</div>
                <div class="options-grid">${optionsHtml}</div>
                <div class="explanation" id="expl-${index}">
                    <strong>Explanation:</strong> ${item.expl}
                </div>
            `;
            container.appendChild(qDiv);
        });
    }

    function selectOption(qIndex, optIndex) {
        userAnswers[qIndex] = optIndex;
        
        // Visual feedback for selection
        const labels = document.querySelectorAll(`#q-card-${qIndex} .option-label`);
        labels.forEach(l => l.style.borderColor = '#ddd');
        labels.forEach(l => l.style.backgroundColor = 'white');
        
        const selectedLabel = document.getElementById(`lbl-${qIndex}-${optIndex}`);
        selectedLabel.style.borderColor = 'var(--secondary)';
        selectedLabel.style.backgroundColor = '#f0fcfc';

        // Update progress text
        const answeredCount = userAnswers.filter(a => a !== null).length;
        document.getElementById('progress-text').innerText = `${answeredCount}/30 Answered`;
    }

    function submitQuiz() {
        const unanswered = userAnswers.filter(a => a === null).length;
        if(unanswered > 0) {
            if(!confirm(`You have ${unanswered} unanswered questions. Submit anyway?`)) {
                return;
            }
        }

        // Calculate Score
        let score = 0;
        questions.forEach((q, i) => {
            if (userAnswers[i] === q.correct) {
                score++;
            }
        });

        // Save History
        saveHistory(score);

        // UI Changes
        document.getElementById('quiz-container').classList.add('hidden');
        document.getElementById('quiz-nav').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        
        document.getElementById('score-text').innerText = score;
        
        let feedback = "";
        if (score >= 25) feedback = "Excellent! You are AIIMS ready.";
        else if (score >= 20) feedback = "Good job! Just a bit more practice.";
        else feedback = "Keep practicing. Review your mistakes below.";
        document.getElementById('feedback-text').innerText = feedback;
    }

    // --- REVIEW MODE ---
    function enableReviewMode() {
        document.getElementById('result-screen').classList.add('hidden');
        document.getElementById('quiz-container').classList.remove('hidden');
        document.body.classList.add('review-mode');

        questions.forEach((q, i) => {
            const card = document.getElementById(`q-card-${i}`);
            const userPick = userAnswers[i];
            
            // Disable inputs
            const inputs = card.querySelectorAll('input');
            inputs.forEach(inpt => inpt.disabled = true);

            // Highlight Correct Answer
            const correctLabel = document.getElementById(`lbl-${i}-${q.correct}`);
            if(correctLabel) correctLabel.classList.add('correct');

            // Highlight Wrong Selection (if any)
            if (userPick !== null && userPick !== q.correct) {
                const wrongLabel = document.getElementById(`lbl-${i}-${userPick}`);
                if(wrongLabel) wrongLabel.classList.add('incorrect');
            }
        });

        // Hide navigation, show home button at bottom
        document.getElementById('quiz-nav').style.display = 'none';
        
        // Add a "Back to Home" button at the bottom of the review list
        const footerBtn = document.createElement('div');
        footerBtn.innerHTML = `<button onclick="location.reload()" style="margin-top:20px; margin-bottom:50px;">Finish Review</button>`;
        document.getElementById('quiz-container').appendChild(footerBtn);
    }

    // --- PERSISTENT STORAGE ---
    function saveHistory(score) {
        let history = JSON.parse(localStorage.getItem(historyKey)) || [];
        const attempt = {
            date: new Date().toLocaleDateString(),
            score: score,
            total: questions.length
        };
        history.unshift(attempt); // Add to top
        if(history.length > 5) history.pop(); // Keep last 5
        localStorage.setItem(historyKey, JSON.stringify(history));
    }

    function renderHistory() {
        const history = JSON.parse(localStorage.getItem(historyKey));
        const historyList = document.getElementById('history-list');
        
        if (!history || history.length === 0) {
            historyList.innerHTML = '<p>No previous attempts found.</p>';
            return;
        }

        let html = '<table><thead><tr><th>Date</th><th>Score</th></tr></thead><tbody>';
        history.forEach(h => {
            html += `<tr><td>${h.date}</td><td>${h.score} / ${h.total}</td></tr>`;
        });
        html += '</tbody></table>';
        historyList.innerHTML = html;
    }

    function clearHistory() {
        localStorage.removeItem(historyKey);
        renderHistory();
    }
</script>

</body>
</html>
