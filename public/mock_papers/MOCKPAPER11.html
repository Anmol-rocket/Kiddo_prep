<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AIIMS CRE Radiographer - Paper 4</title>
    <style>
        /* --- MOBILE OPTIMIZED STYLES (SET D THEME) --- */
        :root {
            --primary: #e11d48; /* Rose/Red Theme */
            --secondary: #9f1239;
            --bg: #fff1f2;
            --text: #1f2937;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding-bottom: 80px; }
        .container { max-width: 900px; margin: 0 auto; padding: 15px; }

        header {
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px);
            padding: 12px 15px; border-radius: 0 0 12px 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100;
            display: flex; justify-content: space-between; align-items: center;
            border-top: 4px solid var(--secondary);
        }
        .header-left h1 { margin: 0; font-size: 1.1rem; color: var(--secondary); }
        .header-left .exam-info { font-size: 0.75rem; color: #666; }
        #progress-indicator { background: white; padding: 5px 10px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }

        .question-card { background: white; padding: 20px; border-radius: 12px; margin-top: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .question-text { font-weight: 600; font-size: 1.05rem; margin-bottom: 15px; color: #111; }
        .options-grid { display: flex; flex-direction: column; gap: 8px; }
        
        .option-label {
            display: flex; align-items: flex-start; padding: 12px;
            border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer;
            background: #fff; transition: 0.2s;
        }
        .option-label.selected { border-color: var(--primary); background-color: #fff1f2; font-weight: 500; }
        input[type="radio"] { margin-right: 12px; margin-top: 3px; accent-color: var(--primary); min-width: 20px; min-height: 20px; }

        .submit-btn {
            display: block; width: 100%; padding: 16px; background-color: var(--secondary); color: white;
            border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 700; margin-top: 25px;
            box-shadow: 0 4px 6px rgba(159, 18, 57, 0.3); touch-action: manipulation;
        }
        .submit-btn:active { transform: scale(0.98); }

        #result-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 1000; overflow-y: auto; padding: 20px;
            align-items: center; justify-content: center;
        }
        .result-content { background: white; padding: 25px; border-radius: 16px; width: 100%; max-width: 400px; text-align: center; }
        .score-display { font-size: 2.5rem; font-weight: 800; color: var(--primary); margin: 15px 0; line-height: 1; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-box { padding: 12px 5px; border-radius: 8px; background: #f9fafb; }
        .stat-label { font-size: 0.75rem; color: #666; text-transform: uppercase; }
        .stat-value { font-size: 1.1rem; font-weight: bold; margin-top: 4px; }
        .close-btn { background: #374151; color: white; padding: 14px; width: 100%; border: none; border-radius: 8px; font-weight: 600; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="header-left">
            <h1>AIIMS CRE Paper 4</h1>
            <div class="exam-info">400 Marks | +4 / -1</div>
        </div>
        <div id="progress-indicator">
            <span id="attempt-count">0</span> / 100
        </div>
    </header>

    <div id="quiz-container"></div>

    <button class="submit-btn" onclick="submitExam()">SUBMIT PAPER 4</button>
</div>

<div id="result-modal">
    <div class="result-content">
        <h2 style="margin:0 0 10px 0; color:#333;"> RESULT</h2>
        <div class="score-display">
            <span id="final-score">0</span><span style="font-size:1.2rem; color:#999; font-weight:400">/400</span>
        </div>
        <div class="stats-grid">
            <div class="stat-box" style="border-bottom: 3px solid var(--success)">
                <div class="stat-label">Correct</div>
                <div class="stat-value" id="count-correct" style="color: var(--success)">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--danger)">
                <div class="stat-label">Incorrect</div>
                <div class="stat-value" id="count-incorrect" style="color: var(--danger)">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--warning)">
                <div class="stat-label">Skipped</div>
                <div class="stat-value" id="count-skipped">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--primary)">
                <div class="stat-label">Accuracy</div>
                <div class="stat-value" id="accuracy-perc">0%</div>
            </div>
        </div>
        <button class="close-btn" onclick="resetExam()">Reset & Try Again</button>
    </div>
</div>

<script>
    // --- NEW QUESTION SET (SET D) ---
    const questionsDB = [
        { id: 301, q: "In trauma radiography, if a cervical spine fracture is suspected, the first view to be taken is:", options: ["AP Open Mouth", "AP Axial", "Lateral (Cross-table)", "Oblique"], correct: 2 },
        { id: 302, q: "The 'Judet view' is used to evaluate fractures of the:", options: ["Acetabulum", "Scapula", "Calcaneus", "Mandible"], correct: 0 },
        { id: 303, q: "Which of the following is an example of an 'Occupational Dose Limit' (Annual)?", options: ["1 mSv", "5 mSv", "20 mSv", "500 mSv"], correct: 2 },
        { id: 304, q: "To reduce patient dose during fluoroscopy, one should use:", options: ["Continuous fluoroscopy", "Pulsed fluoroscopy", "High magnification mode", "Short source-to-skin distance"], correct: 1 },
        { id: 305, q: "In a 'Spinning Top Test' for a single-phase half-wave rectified unit, how many dots should appear for a 0.1 sec exposure?", options: ["6 dots", "12 dots", "5 dots", "10 dots"], correct: 0 },
        { id: 306, q: "The 'Y-view' of the shoulder is primarily used to demonstrate:", options: ["Fracture of clavicle", "Shoulder Dislocation", "AC joint separation", "Bicipital groove"], correct: 1 },
        { id: 307, q: "Which chemical is responsible for the 'rotten egg' smell in a darkroom?", options: ["Acetic acid", "Ammonium thiosulfate", "Sulfur dioxide", "Hydrogen sulfide"], correct: 3 },
        { id: 308, q: "In CT, 'Beam Hardening' artifact is caused by:", options: ["Patient movement", "Preferential absorption of low-energy photons", "Metal implants", "Detector failure"], correct: 1 },
        { id: 309, q: "The standard SI unit for Magnetic Field Strength is:", options: ["Gauss", "Tesla", "Weber", "Hertz"], correct: 1 },
        { id: 310, q: "During a mobile X-ray (portable), the minimum distance the radiographer should stand from the tube is:", options: ["1 meter", "2 meters (6 feet)", "3 meters", "0.5 meters"], correct: 1 },
        { id: 311, q: "A 'Voiding Cystourethrogram' (VCUG) is performed to diagnose:", options: ["Kidney stones", "Vesicoureteral Reflux (VUR)", "Prostate cancer", "Bladder tumor"], correct: 1 },
        { id: 312, q: "Which of the following materials is most commonly used for TLD (Thermoluminescent Dosimeter)?", options: ["CaSO4:Dy", "LiF:Mg,Ti", "Al2O3", "NaCl"], correct: 0 },
        { id: 313, q: "The 'Stryker Notch View' is used to visualize:", options: ["Hill-Sachs lesion", "Bankart lesion", "Rotator cuff tear", "Acromion spur"], correct: 0 },
        { id: 314, q: "In QA, the 'Collimator Alignment Test' tolerance is usually within:", options: ["± 2% of SID", "± 5% of SID", "± 10% of SID", "± 1% of SID"], correct: 0 },
        { id: 315, q: "Which interaction produces the majority of X-rays in the diagnostic range?", options: ["Characteristic Radiation", "Bremsstrahlung Radiation", "Photoelectric Effect", "Compton Effect"], correct: 1 },
        { id: 316, q: "The 'Goython method' is a technique used for measuring:", options: ["Leg length discrepancy", "Scoliosis angle", "Bone age", "Pelvic inlet"], correct: 0 },
        { id: 317, q: "For a lateral projection of the sacrum, the CR is directed:", options: ["Perpendicular to the level of ASIS", "15 degrees caudal", "10 degrees cephalad", "Perpendicular to the level of the PSIS"], correct: 0 },
        { id: 318, q: "Which MRI sequence is best for detecting acute hemorrhage (blood)?", options: ["T1", "T2", "GRE / SWI (Susceptibility Weighted Imaging)", "STIR"], correct: 2 },
        { id: 319, q: "The '15% Rule' states that increasing kVp by 15% has the same effect on density as:", options: ["Doubling the mAs", "Halving the mAs", "Doubling the distance", "Halving the distance"], correct: 0 },
        { id: 320, q: "Which type of grid error results in 'Grid Cut-off' on both sides of the image?", options: ["Off-center", "Off-level", "Upside-down", "Off-focus (Wrong distance)"], correct: 2 }
    ];

    // --- LOGIC (UPDATED STORAGE KEY FOR PAPER 4) ---
    let userAnswers = JSON.parse(localStorage.getItem('aiims_paper4_answers')) || {};
    const quizContainer = document.getElementById('quiz-container');
    const attemptCountSpan = document.getElementById('attempt-count');

    function renderQuiz() {
        quizContainer.innerHTML = '';
        questionsDB.forEach((item, index) => {
            const questionNum = index + 1;
            const card = document.createElement('div');
            card.className = 'question-card';
            
            const qText = document.createElement('div');
            qText.className = 'question-text';
            qText.innerText = `Q${questionNum}. ${item.q}`;
            card.appendChild(qText);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-grid';

            item.options.forEach((optText, optIndex) => {
                const label = document.createElement('label');
                label.className = 'option-label';
                const isChecked = userAnswers[item.id] === optIndex;
                if(isChecked) label.classList.add('selected');

                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `q_${item.id}`;
                radio.value = optIndex;
                radio.checked = isChecked;
                radio.addEventListener('change', () => handleSelection(item.id, optIndex, label, optionsDiv));

                const span = document.createElement('span');
                span.innerText = optText;

                label.appendChild(radio);
                label.appendChild(span);
                optionsDiv.appendChild(label);
            });
            card.appendChild(optionsDiv);
            quizContainer.appendChild(card);
        });
        updateProgress();
    }

    function handleSelection(id, idx, label, parent) {
        parent.querySelectorAll('.option-label').forEach(s => s.classList.remove('selected'));
        label.classList.add('selected');
        userAnswers[id] = idx;
        localStorage.setItem('aiims_paper4_answers', JSON.stringify(userAnswers));
        updateProgress();
    }

    function updateProgress() { attemptCountSpan.innerText = Object.keys(userAnswers).length; }

    function submitExam() {
        if(!confirm("Submit Paper 4 and view results?")) return;
        let correct = 0, incorrect = 0, skipped = 0;
        questionsDB.forEach(q => {
            const val = userAnswers[q.id];
            if (val === undefined || val === null) skipped++;
            else if (val === q.correct) correct++;
            else incorrect++;
        });
        const score = (correct * 4) - (incorrect * 1);
        const attempted = correct + incorrect;
        const acc = attempted === 0 ? 0 : Math.round((correct/attempted)*100);

        document.getElementById('final-score').innerText = score;
        document.getElementById('count-correct').innerText = correct;
        document.getElementById('count-incorrect').innerText = incorrect;
        document.getElementById('count-skipped').innerText = skipped;
        document.getElementById('accuracy-perc').innerText = acc + "%";
        document.getElementById('result-modal').style.display = 'flex';
    }

    function resetExam() {
        if(confirm("Reset Paper 4 history?")) {
            localStorage.removeItem('aiims_paper4_answers');
            location.reload();
        }
    }

    renderQuiz();
</script>
</body>
</html>
