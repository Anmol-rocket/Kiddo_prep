<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AIIMS CRE Radiographer - Paper 3</title>
    <style>
        /* --- MOBILE OPTIMIZED STYLES (SET C THEME) --- */
        :root {
            --primary: #059669; /* Teal/Emerald Theme */
            --secondary: #065f46;
            --bg: #f3f4f6;
            --text: #1f2937;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding-bottom: 80px; }
        .container { max-width: 900px; margin: 0 auto; padding: 15px; }

        header {
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px);
            padding: 12px 15px; border-radius: 0 0 12px 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100;
            display: flex; justify-content: space-between; align-items: center;
            border-top: 4px solid var(--secondary);
        }
        .header-left h1 { margin: 0; font-size: 1.1rem; color: var(--secondary); }
        .header-left .exam-info { font-size: 0.75rem; color: #666; }
        #progress-indicator { background: var(--bg); padding: 5px 10px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; }

        .question-card { background: white; padding: 20px; border-radius: 12px; margin-top: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .question-text { font-weight: 600; font-size: 1.05rem; margin-bottom: 15px; color: #111; }
        .options-grid { display: flex; flex-direction: column; gap: 8px; }
        
        .option-label {
            display: flex; align-items: flex-start; padding: 12px;
            border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer;
            background: #fff; transition: 0.2s;
        }
        .option-label.selected { border-color: var(--primary); background-color: #ecfdf5; font-weight: 500; }
        input[type="radio"] { margin-right: 12px; margin-top: 3px; accent-color: var(--primary); min-width: 20px; min-height: 20px; }

        .submit-btn {
            display: block; width: 100%; padding: 16px; background-color: var(--secondary); color: white;
            border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 700; margin-top: 25px;
            box-shadow: 0 4px 6px rgba(6, 95, 70, 0.3); touch-action: manipulation;
        }
        .submit-btn:active { transform: scale(0.98); }

        #result-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 1000; overflow-y: auto; padding: 20px;
            align-items: center; justify-content: center;
        }
        .result-content { background: white; padding: 25px; border-radius: 16px; width: 100%; max-width: 400px; text-align: center; }
        .score-display { font-size: 2.5rem; font-weight: 800; color: var(--primary); margin: 15px 0; line-height: 1; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-box { padding: 12px 5px; border-radius: 8px; background: #f9fafb; }
        .stat-label { font-size: 0.75rem; color: #666; text-transform: uppercase; }
        .stat-value { font-size: 1.1rem; font-weight: bold; margin-top: 4px; }
        .close-btn { background: #374151; color: white; padding: 14px; width: 100%; border: none; border-radius: 8px; font-weight: 600; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="header-left">
            <h1>AIIMS CRE Paper 3</h1>
            <div class="exam-info">SET-C | 400 Marks | +4 / -1</div>
        </div>
        <div id="progress-indicator">
            <span id="attempt-count">0</span> / 100
        </div>
    </header>

    <div id="quiz-container"></div>

    <button class="submit-btn" onclick="submitExam()">SUBMIT PAPER 3</button>
</div>

<div id="result-modal">
    <div class="result-content">
        <h2 style="margin:0 0 10px 0; color:#333;">Exam Result (Set C)</h2>
        <div class="score-display">
            <span id="final-score">0</span><span style="font-size:1.2rem; color:#999; font-weight:400">/400</span>
        </div>
        <div class="stats-grid">
            <div class="stat-box" style="border-bottom: 3px solid var(--success)">
                <div class="stat-label">Correct</div>
                <div class="stat-value" id="count-correct" style="color: var(--success)">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--danger)">
                <div class="stat-label">Incorrect</div>
                <div class="stat-value" id="count-incorrect" style="color: var(--danger)">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--warning)">
                <div class="stat-label">Skipped</div>
                <div class="stat-value" id="count-skipped">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--primary)">
                <div class="stat-label">Accuracy</div>
                <div class="stat-value" id="accuracy-perc">0%</div>
            </div>
        </div>
        <button class="close-btn" onclick="resetExam()">Reset & Try Again</button>
    </div>
</div>

<script>
    // --- NEW QUESTION SET (SET C) ---
    const questionsDB = [
        { id: 201, q: "In the cell cycle, which phase is considered the most radiosensitive?", options: ["S Phase (Synthesis)", "M Phase (Mitosis)", "G1 Phase", "G0 Phase"], correct: 1 },
        { id: 202, q: "For a Towne's view (AP Axial) of the skull, the CR is angled:", options: ["15 degrees Cephalad", "30 degrees Caudal", "25 degrees Cephalad", "45 degrees Caudal"], correct: 1 },
        { id: 203, q: "Hysterosalpingography (HSG) is primarily performed to evaluate:", options: ["Urinary Bladder stones", "Fallopian tube patency & Uterus", "Renal artery stenosis", "Gallbladder function"], correct: 1 },
        { id: 204, q: "In Digital Radiography, 'Pixel Pitch' is defined as:", options: ["The number of gray shades", "Distance from the center of one pixel to the center of the next", "The size of the detector", "The maximum mA station"], correct: 1 },
        { id: 205, q: "Contraindications for applying compression during an IVU (Intravenous Urography) include:", options: ["Hypertension", "Recent abdominal surgery / Aortic Aneurysm", "Diabetes", "History of asthma"], correct: 1 },
        { id: 206, q: "The term 'Bit Depth' in digital imaging determines the:", options: ["Spatial Resolution", "Number of gray shades available per pixel", "Image noise", "Scan speed"], correct: 1 },
        { id: 207, q: "Which filter is commonly used in a darkroom safelight for green-sensitive film?", options: ["Amber filter", "GBX-2 (Red) filter", "Blue filter", "Clear filter"], correct: 1 },
        { id: 208, q: "In a transformer, the core is typically laminated to reduce:", options: ["Eddy current losses", "Hysteresis losses", "Copper losses", "Voltage drop"], correct: 0 },
        { id: 209, q: "Which view is best to demonstrate the 'Intercondylar Fossa' of the knee?", options: ["AP View", "Lateral View", "Tunnel View (Camp Coventry / Holmblad)", "Skyline View"], correct: 2 },
        { id: 210, q: "The LD 50/60 for humans (Lethal Dose for 50% population in 60 days) is approx:", options: ["1-2 Gy", "3-4 Gy", "8-10 Gy", "0.5 Gy"], correct: 1 },
        { id: 211, q: "ERCP stands for:", options: ["Endoscopic Retrograde Cholangiopancreatography", "Emergency Renal Cyst Procedure", "Early Retrograde Colon Procedure", "Endoscopic Renal Catheter Placement"], correct: 0 },
        { id: 212, q: "If the Pitch in CT is greater than 1, it implies:", options: ["Table moves slower than beam width (Overlap)", "Table moves faster than beam width (Gaps)", "Table does not move", "Patient dose is increased"], correct: 1 },
        { id: 213, q: "Fluid (like CSF) appears ______ on a T1-weighted MRI image.", options: ["Bright (Hyperintense)", "Dark (Hypointense)", "Grey (Isointense)", "Variable"], correct: 1 },
        { id: 214, q: "The function of the 'Rectifier' in an X-ray circuit is to:", options: ["Increase voltage", "Convert AC to DC", "Regulate filament current", "Timer control"], correct: 1 },
        { id: 215, q: "What is the primary purpose of the 'Back-up Timer' in Automatic Exposure Control (AEC)?", options: ["To ensure short exposure", "To prevent tube overload and patient overexposure", "To increase contrast", "To warm up the tube"], correct: 1 },
        { id: 216, q: "Which anatomical landmark corresponds to the level of L4-L5 vertebrae?", options: ["Xiphoid Process", "Lower Costal Margin", "Iliac Crest", "Symphysis Pubis"], correct: 2 },
        { id: 217, q: "The 'Skyline view' (Merchant/Sunrise) is used to visualize the:", options: ["Calcaneus", "Patella (Patellofemoral joint)", "Acromioclavicular joint", "Zygomatic arches"], correct: 1 },
        { id: 218, q: "In radiation protection, 'ALARA' stands for:", options: ["As Low As Reasonably Achievable", "Always Limit Annual Radiation Areas", "As Long As Radiation Allows", "Allow Low Area Radiation Absorption"], correct: 0 },
        { id: 219, q: "Which of the following is a non-ionic contrast medium?", options: ["Barium Sulfate", "Diatrizoate", "Iohexol / Ioversol", "Sodium Iodide"], correct: 2 },
        { id: 220, q: "The process of heating a TLD chip to release stored energy as light is called:", options: ["Fluorescence", "Annealing / Readout", "Phosphorescence", "Incandescence"], correct: 1 }
    ];

    // --- LOGIC (UPDATED STORAGE KEY FOR PAPER 3) ---
    let userAnswers = JSON.parse(localStorage.getItem('aiims_paper3_answers')) || {};
    const quizContainer = document.getElementById('quiz-container');
    const attemptCountSpan = document.getElementById('attempt-count');

    function renderQuiz() {
        quizContainer.innerHTML = '';
        questionsDB.forEach((item, index) => {
            const questionNum = index + 1;
            const card = document.createElement('div');
            card.className = 'question-card';
            
            const qText = document.createElement('div');
            qText.className = 'question-text';
            qText.innerText = `Q${questionNum}. ${item.q}`;
            card.appendChild(qText);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-grid';

            item.options.forEach((optText, optIndex) => {
                const label = document.createElement('label');
                label.className = 'option-label';
                const isChecked = userAnswers[item.id] === optIndex;
                if(isChecked) label.classList.add('selected');

                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `q_${item.id}`;
                radio.value = optIndex;
                radio.checked = isChecked;
                radio.addEventListener('change', () => handleSelection(item.id, optIndex, label, optionsDiv));

                const span = document.createElement('span');
                span.innerText = optText;

                label.appendChild(radio);
                label.appendChild(span);
                optionsDiv.appendChild(label);
            });
            card.appendChild(optionsDiv);
            quizContainer.appendChild(card);
        });
        updateProgress();
    }

    function handleSelection(id, idx, label, parent) {
        parent.querySelectorAll('.option-label').forEach(s => s.classList.remove('selected'));
        label.classList.add('selected');
        userAnswers[id] = idx;
        localStorage.setItem('aiims_paper3_answers', JSON.stringify(userAnswers));
        updateProgress();
    }

    function updateProgress() { attemptCountSpan.innerText = Object.keys(userAnswers).length; }

    function submitExam() {
        if(!confirm("Submit Paper 3 and view results?")) return;
        let correct = 0, incorrect = 0, skipped = 0;
        questionsDB.forEach(q => {
            const val = userAnswers[q.id];
            if (val === undefined || val === null) skipped++;
            else if (val === q.correct) correct++;
            else incorrect++;
        });
        const score = (correct * 4) - (incorrect * 1);
        const attempted = correct + incorrect;
        const acc = attempted === 0 ? 0 : Math.round((correct/attempted)*100);

        document.getElementById('final-score').innerText = score;
        document.getElementById('count-correct').innerText = correct;
        document.getElementById('count-incorrect').innerText = incorrect;
        document.getElementById('count-skipped').innerText = skipped;
        document.getElementById('accuracy-perc').innerText = acc + "%";
        document.getElementById('result-modal').style.display = 'flex';
    }

    function resetExam() {
        if(confirm("Reset Paper 3 history?")) {
            localStorage.removeItem('aiims_paper3_answers');
            location.reload();
        }
    }

    renderQuiz();
</script>
</body>
</html>