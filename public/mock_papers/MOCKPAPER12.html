<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AIIMS CRE Radiographer</title>
    <style>
        /* --- MOBILE OPTIMIZED STYLES (SET E THEME) --- */
        :root {
            --primary: #ea580c; /* Deep Orange Theme */
            --secondary: #c2410c;
            --bg: #fff7ed;
            --text: #1f2937;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding-bottom: 80px; }
        .container { max-width: 900px; margin: 0 auto; padding: 15px; }

        header {
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px);
            padding: 12px 15px; border-radius: 0 0 12px 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100;
            display: flex; justify-content: space-between; align-items: center;
            border-top: 4px solid var(--secondary);
        }
        .header-left h1 { margin: 0; font-size: 1.1rem; color: var(--secondary); }
        .header-left .exam-info { font-size: 0.75rem; color: #666; }
        #progress-indicator { background: white; padding: 5px 10px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }

        .question-card { background: white; padding: 20px; border-radius: 12px; margin-top: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .question-text { font-weight: 600; font-size: 1.05rem; margin-bottom: 15px; color: #111; }
        .options-grid { display: flex; flex-direction: column; gap: 8px; }
        
        .option-label {
            display: flex; align-items: flex-start; padding: 12px;
            border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer;
            background: #fff; transition: 0.2s;
        }
        .option-label.selected { border-color: var(--primary); background-color: #ffedd5; font-weight: 500; }
        input[type="radio"] { margin-right: 12px; margin-top: 3px; accent-color: var(--primary); min-width: 20px; min-height: 20px; }

        .submit-btn {
            display: block; width: 100%; padding: 16px; background-color: var(--secondary); color: white;
            border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 700; margin-top: 25px;
            box-shadow: 0 4px 6px rgba(194, 65, 12, 0.3); touch-action: manipulation;
        }
        .submit-btn:active { transform: scale(0.98); }

        #result-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 1000; overflow-y: auto; padding: 20px;
            align-items: center; justify-content: center;
        }
        .result-content { background: white; padding: 25px; border-radius: 16px; width: 100%; max-width: 400px; text-align: center; }
        .score-display { font-size: 2.5rem; font-weight: 800; color: var(--primary); margin: 15px 0; line-height: 1; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-box { padding: 12px 5px; border-radius: 8px; background: #f9fafb; }
        .stat-label { font-size: 0.75rem; color: #666; text-transform: uppercase; }
        .stat-value { font-size: 1.1rem; font-weight: bold; margin-top: 4px; }
        .close-btn { background: #374151; color: white; padding: 14px; width: 100%; border: none; border-radius: 8px; font-weight: 600; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="header-left">
            <h1>AIIMS CRE Paper</h1>
            <div class="exam-info">400 Marks | +4 / -1</div>
        </div>
        <div id="progress-indicator">
            <span id="attempt-count">0</span> / 100
        </div>
    </header>

    <div id="quiz-container"></div>

    <button class="submit-btn" onclick="submitExam()">SUBMIT PAPER</button>
</div>

<div id="result-modal">
    <div class="result-content">
        <h2 style="margin:0 0 10px 0; color:#333;">Exam Result</h2>
        <div class="score-display">
            <span id="final-score">0</span><span style="font-size:1.2rem; color:#999; font-weight:400">/400</span>
        </div>
        <div class="stats-grid">
            <div class="stat-box" style="border-bottom: 3px solid var(--success)">
                <div class="stat-label">Correct</div>
                <div class="stat-value" id="count-correct" style="color: var(--success)">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--danger)">
                <div class="stat-label">Incorrect</div>
                <div class="stat-value" id="count-incorrect" style="color: var(--danger)">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--warning)">
                <div class="stat-label">Skipped</div>
                <div class="stat-value" id="count-skipped">0</div>
            </div>
            <div class="stat-box" style="border-bottom: 3px solid var(--primary)">
                <div class="stat-label">Accuracy</div>
                <div class="stat-value" id="accuracy-perc">0%</div>
            </div>
        </div>
        <button class="close-btn" onclick="resetExam()">Reset & Try Again</button>
    </div>
</div>

<script>
    // --- NEW QUESTION SET (SET E) ---
    const questionsDB = [
        { id: 401, q: "The 'Air Gap Technique' is used in radiography primarily to:", options: ["Increase magnification", "Reduce scatter radiation reaching the film (act as a grid)", "Reduce patient dose", "Decrease contrast"], correct: 1 },
        { id: 402, q: "Which drug is the first-line treatment for a severe anaphylactic reaction to contrast media?", options: ["Diphenhydramine (Benadryl)", "Adrenaline (Epinephrine)", "Hydrocortisone", "Atropine"], correct: 1 },
        { id: 403, q: "The standard file format for the storage and exchange of medical images is:", options: ["JPEG", "PNG", "DICOM", "TIFF"], correct: 2 },
        { id: 404, q: "In Computed Tomography (CT), the Hounsfield Unit (HU) for air is:", options: ["0", "+1000", "-1000", "-100"], correct: 2 },
        { id: 405, q: "DEXA (Dual-Energy X-ray Absorptiometry) is the gold standard for diagnosing:", options: ["Bone metastases", "Osteoporosis (Bone Mineral Density)", "Multiple Myeloma", "Fractures"], correct: 1 },
        { id: 406, q: "The 'Lordotic View' (Apical Lordotic) of the chest is best for visualizing:", options: ["Lung bases", "Costophrenic angles", "Lung apices / Clavicles", "Heart size"], correct: 2 },
        { id: 407, q: "What is the primary cause of 'Quantum Mottle' (grainy image) in digital radiography?", options: ["High mAs", "Insufficient number of photons (Low mAs)", "High kVp", "Grid cutoff"], correct: 1 },
        { id: 408, q: "In the 'Scottie Dog' appearance of the lumbar spine, the 'eye' represents the:", options: ["Pedicle", "Transverse Process", "Superior Articular Process", "Pars Interarticularis"], correct: 0 },
        { id: 409, q: "PACS stands for:", options: ["Patient Access and Control System", "Picture Archiving and Communication System", "Primary Area Control Section", "Physician Access Computer Station"], correct: 1 },
        { id: 410, q: "What is the formula for calculating Pixel Size?", options: ["Field of View (FOV) / Matrix Size", "Matrix Size / FOV", "FOV x Matrix Size", "Bit Depth / FOV"], correct: 0 },
        { id: 411, q: "The recommended temperature for manual processing of X-ray film is approximately:", options: ["18°C (64.4°F)", "20-22°C (68-72°F)", "28°C (82°F)", "37°C (98.6°F)"], correct: 1 },
        { id: 412, q: "Cryogens like Liquid Helium are used in MRI to:", options: ["Cool the gradient coils", "Maintain superconductivity of the magnet", "Cool the patient", "Enhance contrast"], correct: 1 },
        { id: 413, q: "For a PA Caldwell view of the skull, the petrous ridges should be projected:", options: ["Into the lower 1/3 of the orbits", "Filling the orbits", "Below the maxillary sinuses", "Above the orbits"], correct: 0 },
        { id: 414, q: "The dose limit for the general public (non-radiation workers) is:", options: ["20 mSv/year", "1 mSv/year", "5 mSv/year", "50 mSv/year"], correct: 1 },
        { id: 415, q: "In an IVU, the 'Nephrogram phase' is best visualized at:", options: ["Immediate (0-1 min)", "5 minutes", "15 minutes", "30 minutes"], correct: 0 },
        { id: 416, q: "Which of the following describes Barium Sulfate?", options: ["Water soluble salt", "Insoluble suspension", "Iodinated compound", "Gas contrast"], correct: 1 },
        { id: 417, q: "The wattage of the bulb used in a darkroom safelight should not exceed:", options: ["15 Watts", "60 Watts", "100 Watts", "5 Watts"], correct: 0 },
        { id: 418, q: "A 'Grid Frequency' refers to:", options: ["The height of the lead strips", "The ratio of height to distance", "The number of lead strips per inch/cm", "The speed of the bucky"], correct: 2 },
        { id: 419, q: "Decreasing the OID (Object-to-Image Distance) results in:", options: ["Increased magnification", "Decreased magnification / Sharper image", "Increased blur", "Reduced contrast"], correct: 1 },
        { id: 420, q: "The typical wavelength range of diagnostic X-rays is:", options: ["0.1 to 0.5 Angstroms", "400 to 700 nm", "1 to 10 meters", "10 to 100 Angstroms"], correct: 0 }
    ];

    // --- LOGIC (UPDATED STORAGE KEY FOR PAPER 5) ---
    let userAnswers = JSON.parse(localStorage.getItem('aiims_paper5_answers')) || {};
    const quizContainer = document.getElementById('quiz-container');
    const attemptCountSpan = document.getElementById('attempt-count');

    function renderQuiz() {
        quizContainer.innerHTML = '';
        questionsDB.forEach((item, index) => {
            const questionNum = index + 1;
            const card = document.createElement('div');
            card.className = 'question-card';
            
            const qText = document.createElement('div');
            qText.className = 'question-text';
            qText.innerText = `Q${questionNum}. ${item.q}`;
            card.appendChild(qText);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-grid';

            item.options.forEach((optText, optIndex) => {
                const label = document.createElement('label');
                label.className = 'option-label';
                const isChecked = userAnswers[item.id] === optIndex;
                if(isChecked) label.classList.add('selected');

                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `q_${item.id}`;
                radio.value = optIndex;
                radio.checked = isChecked;
                radio.addEventListener('change', () => handleSelection(item.id, optIndex, label, optionsDiv));

                const span = document.createElement('span');
                span.innerText = optText;

                label.appendChild(radio);
                label.appendChild(span);
                optionsDiv.appendChild(label);
            });
            card.appendChild(optionsDiv);
            quizContainer.appendChild(card);
        });
        updateProgress();
    }

    function handleSelection(id, idx, label, parent) {
        parent.querySelectorAll('.option-label').forEach(s => s.classList.remove('selected'));
        label.classList.add('selected');
        userAnswers[id] = idx;
        localStorage.setItem('aiims_paper5_answers', JSON.stringify(userAnswers));
        updateProgress();
    }

    function updateProgress() { attemptCountSpan.innerText = Object.keys(userAnswers).length; }

    function submitExam() {
        if(!confirm("Submit Paper 5 and view results?")) return;
        let correct = 0, incorrect = 0, skipped = 0;
        questionsDB.forEach(q => {
            const val = userAnswers[q.id];
            if (val === undefined || val === null) skipped++;
            else if (val === q.correct) correct++;
            else incorrect++;
        });
        const score = (correct * 4) - (incorrect * 1);
        const attempted = correct + incorrect;
        const acc = attempted === 0 ? 0 : Math.round((correct/attempted)*100);

        document.getElementById('final-score').innerText = score;
        document.getElementById('count-correct').innerText = correct;
        document.getElementById('count-incorrect').innerText = incorrect;
        document.getElementById('count-skipped').innerText = skipped;
        document.getElementById('accuracy-perc').innerText = acc + "%";
        document.getElementById('result-modal').style.display = 'flex';
    }

    function resetExam() {
        if(confirm("Reset Paper 5 history?")) {
            localStorage.removeItem('aiims_paper5_answers');
            location.reload();
        }
    }

    renderQuiz();
</script>
</body>
</html>
