<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTSC X-Ray Technician Mock Exam</title>
    <style>
        :root {
            --primary: #7c3aed; /* Violet theme */
            --primary-dark: #5b21b6;
            --selected: #ddd6fe;
            --selected-border: #7c3aed;
            --success-bg: #dcfce7;
            --success-text: #166534;
            --error-bg: #fee2e2;
            --error-text: #991b1b;
            --bg: #f5f3ff;
            --card: #ffffff;
            --text: #1f2937;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            padding-bottom: 80px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: white;
            padding: 15px 20px;
            border-bottom: 1px solid #e5e7eb;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timer {
            font-weight: bold;
            color: var(--primary);
            font-size: 1rem;
            background: #f3e8ff;
            padding: 5px 10px;
            border-radius: 6px;
        }

        /* Question Cards */
        .question-card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e5e7eb;
            position: relative;
        }

        .q-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .section-tag {
            background: #ede9fe;
            color: #5b21b6;
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .q-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #111827;
        }

        /* Options */
        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            background: white;
            border: 2px solid #e5e7eb;
            padding: 15px;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            font-size: 1rem;
            color: var(--text);
            transition: all 0.2s;
            position: relative;
        }

        /* Exam Mode Styles */
        body.exam-mode .option-btn:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        body.exam-mode .option-btn.selected {
            background: var(--selected);
            border-color: var(--selected-border);
            color: var(--primary-dark);
            font-weight: 600;
        }

        /* Review Mode Styles */
        body.review-mode .option-btn {
            cursor: default;
        }

        body.review-mode .option-btn.correct-answer {
            background: var(--success-bg);
            border-color: #22c55e;
            color: var(--success-text);
        }

        body.review-mode .option-btn.wrong-choice {
            background: var(--error-bg);
            border-color: #ef4444;
            color: var(--error-text);
            text-decoration: line-through;
        }

        /* Clear Selection Button */
        .clear-btn {
            background: transparent;
            border: none;
            color: #6b7280;
            font-size: 0.85rem;
            margin-top: 10px;
            cursor: pointer;
            text-decoration: underline;
            padding: 5px 0;
        }
        .clear-btn:hover { color: var(--error-text); }

        /* Explanation Box */
        .explanation {
            margin-top: 20px;
            padding: 15px;
            background: #fdf4ff; /* Light violet tint */
            border-left: 4px solid var(--primary);
            border-radius: 4px;
            font-size: 0.95rem;
            display: none;
        }
        body.review-mode .explanation { display: block; }

        /* Result Panel */
        .result-panel {
            display: none;
            background: #2e1065;
            color: white;
            padding: 30px 20px;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 0 0 20px 20px;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border: 6px solid #a855f7;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0 auto 20px auto;
            font-size: 2rem;
            font-weight: bold;
        }
        .score-circle span { font-size: 0.9rem; font-weight: normal; opacity: 0.8; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 600px;
            margin: 0 auto;
        }
        .stat-box {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
        }
        .stat-val { font-size: 1.2rem; font-weight: bold; }
        .stat-label { font-size: 0.8rem; opacity: 0.8; }

        /* Fixed Footer */
        .footer-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            z-index: 1000;
        }

        .submit-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(124, 58, 237, 0.3);
            width: 100%;
            max-width: 400px;
        }
        .submit-btn:hover { background: var(--primary-dark); }

        .retry-btn {
            display: none;
            background: white;
            color: #2e1065;
            border: none;
            padding: 12px 40px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        @media(max-width: 600px) {
            .stats-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body class="exam-mode">

    <div class="header">
        <h3 style="margin:0">BTSC X-Ray Technician</h3>
        <div class="timer" id="timer">02:00:00</div>
    </div>

    <div class="result-panel" id="result-panel">
        <div class="score-circle">
            <div id="final-score">0</div>
            <span>/ 400</span> </div>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-val" id="stat-correct" style="color:#4ade80">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat-box">
                <div class="stat-val" id="stat-wrong" style="color:#f87171">0</div>
                <div class="stat-label">Wrong</div>
            </div>
            <div class="stat-box">
                <div class="stat-val" id="stat-skip">0</div>
                <div class="stat-label">Skipped</div>
            </div>
            <div class="stat-box">
                <div class="stat-val" id="stat-acc">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
        </div>
        <button class="retry-btn" onclick="location.reload()" style="display:inline-block">Retake Exam</button>
    </div>

    <div class="container" id="questions-container">
        </div>

    <div class="footer-bar" id="footer-bar">
        <button class="submit-btn" onclick="submitExam()">Submit Exam</button>
    </div>

<script>
    // --- Data Source (BTSC Exam Paper - Domain Knowledge) ---
    // Scoring: +4 for Correct, -1 for Wrong (As per user instruction)
    
    const quizData = [
        { id: 1, section: "Anatomy", q: "Movement of foot downwards away from body is called:", options: ["Inversion", "Eversion", "Plantar flexion", "Dorsi flexion"], correct: 2, explain: "Plantar flexion is the movement of the foot in a downward direction." },
        { id: 2, section: "Physics", q: "The primary SI unit for measuring pressure is:", options: ["Candela", "Pascal", "Newton", "Lux"], correct: 1, explain: "The Pascal (Pa) is the SI unit of pressure." },
        { id: 3, section: "Physics", q: "What is produced when an electron slows down in the electric field of an atomic nucleus?", options: ["Carlo Matteucci radiation", "Einthoven radiation", "Bremsstrahlung radiation", "Callista radiation"], correct: 2, explain: "Bremsstrahlung (Braking radiation) occurs when electrons decelerate." },
        { id: 4, section: "Physics", q: "Bremsstrahlung is also known as:", options: ["Joining radiation", "Combining radiation", "Freezing radiation", "Braking radiation"], correct: 3, explain: "Bremsstrahlung is German for 'Braking Radiation'." },
        { id: 5, section: "Radiography", q: "Radiographic exam using barium sulfate for esophagus, stomach, and small intestine?", options: ["Barium laxative", "Barium meal", "Barium enema", "Barium suppository"], correct: 1, explain: "A Barium Meal examines the upper GI tract including the small intestine (Follow-through)." },
        { id: 6, section: "Physics", q: "All are radionuclides EXCEPT:", options: ["Radium-226", "Cesium-137", "Argon-27", "Strontium-90"], correct: 2, explain: "Argon-27 is extremely unstable or non-existent in standard contexts compared to common radionuclides." },
        { id: 7, section: "Physics", q: "What is the wavelength of X-rays?", options: ["10 to 100 nm", "1000 to 10000 nm", "0.01 to 10 nm", "100 to 1000 nm"], correct: 2, explain: "X-rays have very short wavelengths, typically 0.01 to 10 nanometers." },
        { id: 8, section: "Anatomy", q: "Brodmann area associated with primary motor cortex?", options: ["Area 42", "Area 30", "Area 4", "Area 51"], correct: 2, explain: "Brodmann Area 4 corresponds to the Precentral Gyrus (Primary Motor Cortex)." },
        { id: 9, section: "Radiography", q: "Knee X-ray view also known as Patellofemoral joint view?", options: ["AP", "Weight-bearing", "Sunrise view", "Lateral"], correct: 2, explain: "Sunrise (Skyline/Tangential) view visualizes the patellofemoral joint space." },
        { id: 10, section: "Physics", q: "Atomic weight of Radium?", options: ["302.025", "226.025", "106.025", "416.025"], correct: 1, explain: "Radium-226 has an atomic mass of approx 226." },
        { id: 11, section: "Pathology", q: "Retrocardiac mass with air-fluid level is a feature of:", options: ["Femoral hernia", "Ventral hernia", "Inguinal hernia", "Hiatal hernia"], correct: 3, explain: "Hiatal hernia allows the stomach to move into the chest, often showing an air-fluid level behind the heart." },
        { id: 12, section: "Physics", q: "What is the energy range of X-rays?", options: ["1 eV to 1 keV", "100 eV to 100 keV", "1 eV to 10 keV", "10 eV to 10 keV"], correct: 1, explain: "Diagnostic X-rays typically range from 20 keV to 150 keV (Option 2 covers the general range best)." },
        { id: 13, section: "Anatomy", q: "Lobe for decision-making, planning, and voluntary movement?", options: ["Occipital", "Parietal", "Temporal", "Frontal"], correct: 3, explain: "The Frontal lobe controls executive functions and voluntary movement." },
        { id: 14, section: "Anatomy", q: "Structure located in the inner layer of the eye?", options: ["Retina", "Cornea", "Sclera", "Iris"], correct: 0, explain: "The Retina is the innermost nervous coat of the eye." },
        { id: 15, section: "Physiology", q: "Primary hormone/neurotransmitter secreted from Substantia Nigra?", options: ["Epinephrine", "Dopamine", "Dobutamine", "Norepinephrine"], correct: 1, explain: "Substantia Nigra produces Dopamine; its loss leads to Parkinson's." },
        { id: 16, section: "Anatomy", q: "Bone known as the kneecap?", options: ["Calcaneus", "Hamate", "Patella", "Talus"], correct: 2, explain: "Patella." },
        { id: 17, section: "Anatomy", q: "Bone-forming cells?", options: ["Chondrocytes", "Chondroblasts", "Osteoclasts", "Osteoblasts"], correct: 3, explain: "Osteoblasts build bone." },
        { id: 18, section: "Anatomy", q: "Lobe that processes visual information?", options: ["Temporal", "Frontal", "Parietal", "Occipital"], correct: 3, explain: "Occipital lobe." },
        { id: 19, section: "Anatomy", q: "Cranial nerve for hearing and balance?", options: ["Accessory", "Oculomotor", "Acoustic (Vestibulocochlear)", "Abducens"], correct: 2, explain: "CN VIII (Acoustic/Vestibulocochlear)." },
        { id: 20, section: "Physics", q: "1 Becquerel (Bq) equals?", options: ["9.614x10^-11 Ci", "2.703x10^-11 Ci", "6.663x10^-11 Ci", "8.783x10^-11 Ci"], correct: 1, explain: "1 Ci = 3.7 x 10^10 Bq. 1 Bq = 1 / 3.7x10^10 approx 2.7 x 10^-11 Ci." },
        
        { id: 21, section: "Procedures", q: "Common surgery for Hiatal Hernia?", options: ["Ramstedt", "Nissen Fundoplication", "Fontan", "Duhamel"], correct: 1, explain: "Nissen Fundoplication wraps the stomach fundus around the esophagus." },
        { id: 22, section: "Physics", q: "All are features of Roentgen rays EXCEPT:", options: ["No electric charge", "Require medium to travel", "Travel in straight lines", "Pass through vacuum"], correct: 1, explain: "X-rays are electromagnetic waves and do NOT require a medium (can travel in vacuum)." },
        { id: 23, section: "Anatomy", q: "Reflex center for vital functions (breathing, heart rate)?", options: ["Cerebrum", "Medulla oblongata", "Hypothalamus", "Cerebellum"], correct: 1, explain: "Medulla Oblongata." },
        { id: 24, section: "Physics", q: "Circular particle accelerators for electrons?", options: ["Trophoblasts", "Synchrotrons", "Syncytio...", "Prions"], correct: 1, explain: "Synchrotrons accelerate particles in a circular path." },
        { id: 25, section: "Anatomy", q: "All movements possible at elbow joint EXCEPT:", options: ["Circumduction", "Extension", "Pronation", "Flexion"], correct: 0, explain: "The elbow is a hinge joint (Flex/Ext). Radioulnar allows Pronation. Circumduction is not possible." },
        { id: 26, section: "Physics", q: "Wavelengths of Hard X-rays?", options: ["Larger than 10 nm", "Shorter than 4 nm", "Larger than 4 nm", "Shorter than 0.1 nm"], correct: 3, explain: "Hard X-rays have high energy and very short wavelengths (< 0.1 nm)." },
        { id: 27, section: "Physics", q: "Father of Magnetism?", options: ["William Einthoven", "William Gilbert", "Wundt", "Harvey"], correct: 1, explain: "William Gilbert." },
        { id: 28, section: "Physiology", q: "Chemical name of 5-hydroxytryptamine?", options: ["Histidine", "Dopamine", "Serotonin", "Glutamate"], correct: 2, explain: "Serotonin." },
        { id: 29, section: "Physics", q: "Radium belongs to which periodic group?", options: ["Group 1", "Group 3", "Group 2", "Group 4"], correct: 2, explain: "Alkaline Earth Metals (Group 2)." },
        { id: 30, section: "Anatomy", q: "Medulla oblongata formed from?", options: ["Diencephalon", "Metencephalon", "Myelencephalon", "Mesencephalon"], correct: 2, explain: "Myelencephalon becomes the Medulla." },
        
        { id: 31, section: "Physics", q: "Magnetism is primarily caused by:", options: ["Thermal charges", "Chemical liquids", "Water molecules", "Movement of electric charges"], correct: 3, explain: "Moving electric charges create magnetic fields." },
        { id: 32, section: "Physics", q: "Radioisotope generator for Technetium-99m?", options: ["Polonium-13", "Molybdenum-99", "Curium-26", "Stroncium-31"], correct: 1, explain: "Mo-99 generator." },
        { id: 33, section: "Anatomy", q: "Organelle for cellular respiration/energy?", options: ["Ribosomes", "Golgi", "Mitochondria", "Lysosomes"], correct: 2, explain: "Mitochondria." },
        { id: 34, section: "Anatomy", q: "Lateral aperture of fourth ventricle?", options: ["Aqueduct", "Foramen of Monro", "Foramen of Magendie", "Foramen of Luschka"], correct: 3, explain: "Luschka (Lateral), Magendie (Medial)." },
        { id: 35, section: "Physics", q: "Frequency of X-rays?", options: ["100-300 exahertz", "30-100 exahertz", "30 petahertz to 30 exahertz", "1-10 petahertz"], correct: 2, explain: "X-ray frequency range is approx 30 PHz to 30 EHz." },
        { id: 36, section: "Physics", q: "Machine converting Electrical to Mechanical energy?", options: ["Kettle", "Generator", "Conductor", "Electric motor"], correct: 3, explain: "Electric Motor." },
        { id: 37, section: "Physics", q: "Properties of X-ray EXCEPT:", options: ["Ionising", "Travel straight line", "Penetrate tissue", "Deviate in absence of EM field?"], correct: 3, explain: "X-rays do NOT deviate in electric or magnetic fields (Question phrasing in PDF seems slightly odd, but 'Deviate' is false)." },
        { id: 38, section: "Physics", q: "Radium series is also known as:", options: ["Uranium series", "Cobalt series", "Mercury series", "Curium series"], correct: 0, explain: "The Uranium-238 decay chain is often called the Radium series." },
        { id: 39, section: "Physics", q: "Standard unit for sound intensity?", options: ["Curie", "Becquerel", "Decibel", "Rontgen"], correct: 2, explain: "Decibel (dB)." },
        { id: 40, section: "Physics", q: "Quality of Roentgen rays affected by all EXCEPT:", options: ["Tube Potential", "Material Density", "Wavelength", "Patient Age"], correct: 3, explain: "Beam quality depends on kVp and filtration, not patient age." },
        
        { id: 41, section: "Anatomy", q: "Artery supplying the stomach?", options: ["Coronary", "Carotid", "Gastric artery", "Phrenic"], correct: 2, explain: "Gastric arteries supply the stomach." },
        { id: 42, section: "Physics", q: "Isotope for thyroid imaging?", options: ["Iodine-345", "Iodine-123", "Iodine-456", "Iodine-234"], correct: 1, explain: "I-123 is preferred for imaging due to better characteristics than I-131." },
        { id: 43, section: "Pathology", q: "'Coiled spring' defect in barium enema?", options: ["Omphalocele", "Gastroschisis", "Intussusception", "Fistula"], correct: 2, explain: "Classic sign of Intussusception." },
        { id: 44, section: "Pathology", q: "Stomach protruding through diaphragm?", options: ["Hiatal hernia", "Hirschsprung", "Volvulus", "Intussusception"], correct: 0, explain: "Hiatal Hernia." },
        { id: 45, section: "Procedures", q: "Radioactive material placed inside tissue?", options: ["Teletherapy", "Acupuncture", "Acupressure", "Brachytherapy"], correct: 3, explain: "Brachytherapy." },
        { id: 46, section: "Physics", q: "Natural radionuclides EXCEPT:", options: ["Radium", "Radon", "Technetium", "Uranium"], correct: 2, explain: "Technetium is artificially produced." },
        { id: 47, section: "Anatomy", q: "Smooth muscle found in all EXCEPT:", options: ["Intestines", "Heart", "Bladder", "Stomach"], correct: 1, explain: "Heart is Cardiac muscle." },
        { id: 48, section: "Anatomy", q: "Location of Apical pulse?", options: ["Left 2nd ICS", "Right 4th ICS", "Right 3rd ICS", "Left 5th intercostal space"], correct: 3, explain: "Apex of heart." },
        { id: 49, section: "Anatomy", q: "Muscle from clavicle/acromion/spine?", options: ["Vastus", "Deltoid", "Sartorius", "Gluteus"], correct: 1, explain: "Deltoid muscle." },
        { id: 50, section: "Anatomy", q: "Square muscle causing pronation?", options: ["Flexor carpi", "Pronator teres", "Flexor radialis", "Pronator quadratus"], correct: 3, explain: "Pronator Quadratus (square shaped)." },
        
        { id: 51, section: "Physiology", q: "QRS complex indicates?", options: ["Atrial repolarisation", "Ventricular depolarisation", "Ventricular repolarisation", "Atrial depolarisation"], correct: 1, explain: "Ventricular Depolarization." },
        { id: 52, section: "Anatomy", q: "Utricle and Saccule location?", options: ["Lungs", "Heart", "Eyes", "Ear"], correct: 3, explain: "Inner ear (Vestibular system)." },
        { id: 53, section: "Pathology", q: "Bird-beak appearance in barium swallow?", options: ["VSD", "ASD", "Achalasia cardia", "Gastroschisis"], correct: 2, explain: "Achalasia." },
        { id: 54, section: "Physics", q: "Most common radioisotope in teletherapy?", options: ["Manganese", "Cobalt-60", "Copper", "Magnesium"], correct: 1, explain: "Cobalt-60." },
        { id: 55, section: "Physics", q: "Atomic number of Curium?", options: ["81", "96", "57", "49"], correct: 1, explain: "Curium (Cm) is 96." },
        { id: 56, section: "Physics", q: "Yard measures?", options: ["Resistance", "Distance", "Voltage", "Speed"], correct: 1, explain: "Unit of length." },
        { id: 57, section: "Radiography", q: "KUB X-ray evaluates EXCEPT:", options: ["Kidneys", "Bladder", "Ureter", "Urethra"], correct: 3, explain: "Urethra is not typically visualized on plain KUB." },
        { id: 58, section: "Physics", q: "Isotope to diagnose/treat thyroid cancer?", options: ["Iodine-131", "Helium", "Iron", "Nitrogen"], correct: 0, explain: "I-131 is used for therapy and diagnosis." },
        { id: 59, section: "Physiology", q: "Hormones produced in testes/ovaries/adrenals?", options: ["Somatotrophins", "Somatostatins", "Androgens", "Melatonin"], correct: 2, explain: "Androgens are sex hormones." },
        { id: 60, section: "Anatomy", q: "Quadriceps femoris includes EXCEPT:", options: ["Vastus medialis", "Rectus femoris", "Gluteus maximus", "Vastus lateralis"], correct: 2, explain: "Gluteus is a hip muscle." },
        
        { id: 61, section: "Anatomy", q: "Cell's digestive system?", options: ["Mitochondria", "Ribosomes", "Lysosomes", "Golgi"], correct: 2, explain: "Lysosomes." },
        { id: 62, section: "Anatomy", q: "Motor speech area aka?", options: ["Wernicke's", "Broca's area", "Kocher's", "Erb's"], correct: 1, explain: "Broca's area." },
        { id: 63, section: "Physiology", q: "Proteolytic enzyme?", options: ["Lactase", "Trypsin", "Sucrase", "Amylase"], correct: 1, explain: "Trypsin digests proteins." },
        { id: 64, section: "Anatomy", q: "U-shaped bone in neck?", options: ["Malleus", "Ischium", "Hyoid bone", "Pisiform"], correct: 2, explain: "Hyoid." },
        { id: 65, section: "Radiography", q: "True for PA chest view?", options: ["Front to back", "Angled", "Back to front", "Side to side"], correct: 2, explain: "Beam enters Back (Posterior) exits Front (Anterior)." },
        { id: 66, section: "Anatomy", q: "Pathway from LGN to visual cortex?", options: ["Motor rad", "Auditory rad", "Optic Radiation", "Somato rad"], correct: 2, explain: "Optic Radiation." },
        { id: 67, section: "Anatomy", q: "Fluid-filled spiral cavity in inner ear?", options: ["Cochlea", "Retina", "Sclera", "Pinna"], correct: 0, explain: "Cochlea." },
        { id: 68, section: "Anatomy", q: "Regulates temp/hunger/sleep?", options: ["Thalamus", "Metathalamus", "Epithalamus", "Hypothalamus"], correct: 3, explain: "Hypothalamus." },
        { id: 69, section: "Psychology", q: "Mind power for action?", options: ["Regression", "Repression", "Cognition", "Conation"], correct: 3, explain: "Conation is the mental faculty of purpose/desire/action." },
        { id: 70, section: "Physics", q: "Ampere unit of?", options: ["Electric current", "Voltage", "Light", "Resistance"], correct: 0, explain: "Current." },
        
        { id: 71, section: "Physics", q: "True regarding Hard X-rays EXCEPT?", options: ["High energy", "Short wavelength", "High penetration", "Longer wavelengths (>4A)"], correct: 3, explain: "Hard X-rays have SHORT wavelengths." },
        { id: 72, section: "Physiology", q: "Sympathetic stimulation changes EXCEPT?", options: ["Increased HR", "Fastens digestion", "Increased breathing", "Vasoconstriction"], correct: 1, explain: "Sympathetic ('Fight or Flight') SLOWS digestion." },
        { id: 73, section: "Pathology", q: "Increase in AP chest diameter?", options: ["Barrel chest", "Lordosis", "Kyphosis", "Scoliosis"], correct: 0, explain: "Barrel chest (COPD)." },
        { id: 74, section: "Physics", q: "Radium series ends with?", options: ["Stable Lead-206", "Radon", "Thorium", "Uranium"], correct: 0, explain: "Lead-206." },
        { id: 75, section: "Anatomy", q: "Vessel from R/L brachiocephalic veins?", options: ["Carotid", "IVC", "Superior Vena Cava", "Coronary"], correct: 2, explain: "SVC." },
        { id: 76, section: "Physiology", q: "ECG electrode V6 location?", options: ["V3", "V4", "V5", "V6"], correct: 3, explain: "Left mid-axillary line 5th ICS. (Question text in PDF had V5/V6 confusion, correct answer for location described is V6)." },
        { id: 77, section: "Physics", q: "Aluminium-27 + Alpha particles -> ?", options: ["Ca", "Phosphorus-30", "Na", "K"], correct: 1, explain: "30P + neutron." },
        { id: 78, section: "Physics", q: "SI unit of force?", options: ["Candela", "Lumen", "Lux", "Newton"], correct: 3, explain: "Newton." },
        { id: 79, section: "Physiology", q: "Regulates circadian rhythm?", options: ["Pineal gland", "Adrenal medulla", "Thymus", "Cortex"], correct: 0, explain: "Pineal gland (Melatonin)." },
        { id: 80, section: "Anatomy", q: "Muscle on posterior humerus?", options: ["Biceps", "Brachialis", "Triceps brachii", "Brachioradialis"], correct: 2, explain: "Triceps." },
        
        { id: 81, section: "Anatomy", q: "Cell's digestive system?", options: ["Golgi", "Ribosomes", "Lysosomes", "Mitochondria"], correct: 2, explain: "Lysosomes." },
        { id: 82, section: "Physics", q: "Boron-10/Nitrogen-14 + Neutrons produces?", options: ["Aurum", "Sodium", "Radioactive carbon-14", "Hydrogen"], correct: 2, explain: "Carbon-14 (from Nitrogen-14 usually)." },
        { id: 83, section: "Anatomy", q: "White matter highway for motor/sensory?", options: ["Pia", "Arachnoid", "Luschka", "Internal capsule"], correct: 3, explain: "Internal Capsule." },
        { id: 84, section: "Radiography", q: "Structure NOT visualised by Barium Enema?", options: ["Descending colon", "Esophagus", "Sigmoid", "Rectum"], correct: 1, explain: "Esophagus (Requires Swallow)." },
        { id: 85, section: "Physics", q: "Half-life Cobalt-60?", options: ["2.32 yr", "5.27 years", "3.11 yr", "1.24 yr"], correct: 1, explain: "5.27 years." },
        { id: 86, section: "Physics", q: "DC in electricity?", options: ["Direct current", "Diagonal", "Deviational", "Doped"], correct: 0, explain: "Direct Current." },
        { id: 87, section: "Anatomy", q: "Broca's area location?", options: ["Frontal lobe", "Parietal", "Occipital", "Temporal"], correct: 0, explain: "Frontal lobe." },
        { id: 88, section: "Physics", q: "X-ray interactions EXCEPT:", options: ["Compton", "Bernoulli effect", "Pair production", "Photoelectric"], correct: 1, explain: "Bernoulli is fluid dynamics." },
        { id: 89, section: "Radiography", q: "Barium Meal visualises EXCEPT:", options: ["Oesophagus", "Colon", "Duodenum", "Stomach"], correct: 1, explain: "Colon (Requires Enema)." },
        { id: 90, section: "Physics", q: "Atomic number Radium?", options: ["44", "55", "77", "88"], correct: 3, explain: "88." },
        
        { id: 91, section: "Anatomy", q: "Lung lobes?", options: ["R3 L3", "R2 L2", "Right lung -3 and left lung -2 lobes", "R2 L3"], correct: 2, explain: "Right 3, Left 2." },
        { id: 92, section: "Physics", q: "Voltage aka?", options: ["Magnetic", "Light", "Potential difference", "Atomic"], correct: 2, explain: "Potential Difference." },
        { id: 93, section: "Anatomy", q: "Muscle pulling cheeks against teeth (blowing)?", options: ["Masseter", "Temporalis", "Pterygoid", "Buccinator"], correct: 3, explain: "Buccinator." },
        { id: 94, section: "Physics", q: "Radium series starts with?", options: ["Radon", "Thorium", "Uranium-238", "Lead"], correct: 2, explain: "U-238." },
        { id: 95, section: "Pathology", q: "Fluid in abdomen on X-ray?", options: ["Tamponade", "Ascites", "Effusion", "Pneumoperitoneum"], correct: 1, explain: "Ascites." },
        { id: 96, section: "Physics", q: "X-rays also known as?", options: ["Michael", "Roentgen rays", "Faraday", "Curie"], correct: 1, explain: "Roentgen rays." },
        { id: 97, section: "Physics", q: "Radioactivity units EXCEPT?", options: ["Becquerel", "Candela", "Sievert", "Gray"], correct: 1, explain: "Candela (Light)." },
        { id: 98, section: "Anatomy", q: "Primary muscle of respiration?", options: ["Diaphragm", "Trapezius", "Scalene", "Pterygoid"], correct: 0, explain: "Diaphragm." },
        { id: 99, section: "Radiography", q: "Barium Swallow diagnose EXCEPT?", options: ["Hiatal hernia", "GERD", "Hirschsprung disease", "Spasms"], correct: 2, explain: "Hirschsprung is a colonic disease." },
        { id: 100, section: "Anatomy", q: "Link between nervous and endocrine systems?", options: ["Corpus callosum", "Aqueduct", "Hypothalamus", "Medulla"], correct: 2, explain: "Hypothalamus." }
    ];

    // --- State Management ---
    let userAnswers = new Array(quizData.length).fill(null); 
    let isExamActive = true;
    let timerInterval;
    let timeRemaining = 120 * 60; // 2 Hours in seconds

    // --- DOM Elements ---
    const container = document.getElementById("questions-container");
    const resultPanel = document.getElementById("result-panel");
    const footerBar = document.getElementById("footer-bar");
    const statusText = document.getElementById("timer");

    // --- Initialization ---
    function initQuiz() {
        container.innerHTML = "";
        
        quizData.forEach((item, index) => {
            const card = document.createElement("div");
            card.className = "question-card";
            card.id = `q-card-${index}`;

            // Options HTML
            let optionsHTML = "";
            item.options.forEach((opt, optIndex) => {
                optionsHTML += `
                    <button class="option-btn" 
                            id="btn-${index}-${optIndex}" 
                            onclick="selectOption(${index}, ${optIndex})">
                        <span style="font-weight:bold; margin-right:10px;">${String.fromCharCode(65+optIndex)}.</span> ${opt}
                    </button>`;
            });

            card.innerHTML = `
                <div class="q-header">
                    <span class="section-tag">${item.section}</span>
                    <span style="color:#6b7280; font-size:0.9rem;">Q${index + 1}</span>
                </div>
                <div class="q-text">${item.q}</div>
                <div class="options-grid">
                    ${optionsHTML}
                </div>
                <button class="clear-btn" id="clear-${index}" onclick="clearSelection(${index})" style="visibility:hidden">Clear Selection</button>
                <div class="explanation" id="explain-${index}">
                    <strong>Correct Answer:</strong> ${item.options[item.correct]}<br><br>
                    <strong>Explanation:</strong> ${item.explain}
                </div>
            `;
            container.appendChild(card);
        });

        startTimer();
    }

    // --- Timer ---
    function startTimer() {
        timerInterval = setInterval(() => {
            if (timeRemaining <= 0) {
                clearInterval(timerInterval);
                submitExam(true); // Auto submit
                return;
            }
            timeRemaining--;
            const hrs = Math.floor(timeRemaining / 3600);
            const mins = Math.floor((timeRemaining % 3600) / 60);
            const secs = timeRemaining % 60;
            statusText.innerText = `${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
        }, 1000);
    }

    // --- Interactions ---
    window.selectOption = function(qIndex, optIndex) {
        if (!isExamActive) return;

        // Update State
        userAnswers[qIndex] = optIndex;

        // Update UI
        const btns = document.querySelectorAll(`#q-card-${qIndex} .option-btn`);
        btns.forEach(btn => btn.classList.remove("selected"));
        
        const selectedBtn = document.getElementById(`btn-${qIndex}-${optIndex}`);
        selectedBtn.classList.add("selected");

        // Show Clear Button
        document.getElementById(`clear-${qIndex}`).style.visibility = "visible";
    };

    window.clearSelection = function(qIndex) {
        if (!isExamActive) return;
        userAnswers[qIndex] = null;
        const btns = document.querySelectorAll(`#q-card-${qIndex} .option-btn`);
        btns.forEach(btn => btn.classList.remove("selected"));
        document.getElementById(`clear-${qIndex}`).style.visibility = "hidden";
    };

    // --- Submission Logic ---
    window.submitExam = function(auto = false) {
        if (!auto && !confirm("Are you sure you want to submit? This will end the exam.")) return;

        clearInterval(timerInterval);
        isExamActive = false;
        document.body.classList.remove("exam-mode");
        document.body.classList.add("review-mode");
        
        let correctCount = 0;
        let wrongCount = 0;
        let skippedCount = 0;
        let totalScore = 0;

        // Scoring: +4 Correct, -1 Wrong (As requested)
        quizData.forEach((item, index) => {
            const userChoice = userAnswers[index];
            const explanationDiv = document.getElementById(`explain-${index}`);
            const clearBtn = document.getElementById(`clear-${index}`);
            
            // Hide clear button
            clearBtn.style.display = "none";
            // Show explanation
            explanationDiv.style.display = "block";

            // Visual marking
            const correctBtn = document.getElementById(`btn-${index}-${item.correct}`);
            correctBtn.classList.add("correct-answer");

            if (userChoice === null) {
                skippedCount++;
            } else if (userChoice === item.correct) {
                correctCount++;
                totalScore += 4;
            } else {
                wrongCount++;
                totalScore -= 1; 
                const wrongBtn = document.getElementById(`btn-${index}-${userChoice}`);
                wrongBtn.classList.add("wrong-choice");
            }
        });

        // Calculate Accuracy
        const attempted = correctCount + wrongCount;
        const accuracy = attempted === 0 ? 0 : Math.round((correctCount / attempted) * 100);

        // Update Result Panel
        document.getElementById("final-score").innerText = totalScore;
        document.getElementById("stat-correct").innerText = correctCount;
        document.getElementById("stat-wrong").innerText = wrongCount;
        document.getElementById("stat-skip").innerText = skippedCount;
        document.getElementById("stat-acc").innerText = accuracy + "%";

        // UI Changes
        resultPanel.style.display = "block";
        footerBar.style.display = "none";
        statusText.innerText = "Exam Completed";
        statusText.style.background = "#fee2e2";
        statusText.style.color = "#991b1b";

        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    // Run on Load
    initQuiz();

</script>
</body>
</html>
